<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/home/burschka/XVision2-2.0.0/src/Devices/StereoVidere.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.0 on Fri Oct 26 00:17:16 2007 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>/home/burschka/XVision2-2.0.0/src/Devices/StereoVidere.h</h1><div class="fragment"><pre>00001 <font class="preprocessor">#include "config.h"</font>
00002 <font class="preprocessor">#include "XVBlobs.h"</font>
00003 <font class="preprocessor">#include "XVImageScalar.h"</font>
00004 <font class="preprocessor">#include "Videre.h"</font>
00005 
00006 <font class="preprocessor">#ifndef STEREO_VIDERE
</font>00007 <font class="preprocessor"></font><font class="preprocessor">#define STEREO_VIDERE
</font>00008 <font class="preprocessor"></font>
00009 <font class="keyword">struct </font>CALIBRATION_PARAMS {
00010   <font class="keywordtype">double</font> height;          <font class="comment">// height of camera</font>
00011   <font class="keywordtype">double</font> angle;           <font class="comment">// angle of camera</font>
00012   <font class="keywordtype">double</font> d_lower;         <font class="comment">// max disparity of lowest line of disparity map</font>
00013 };
00014 
00015 <font class="keyword">template</font> &lt;<font class="keyword">class </font>T, <font class="keyword">class </font>Y&gt;
00016 <font class="keyword">class </font>StereoVidere : <font class="keyword">public</font> XV_Videre&lt;T&gt;
00017 {
00018  <font class="keyword">protected</font>:
00019   <font class="keyword">using</font> XV_Videre&lt;T&gt;::get_stereo;
00020   <font class="keyword">using</font> XV_Videre&lt;T&gt;::s_image;
00021   <font class="keyword">using</font> XV_Videre&lt;T&gt;::sourceObject;
00022   <font class="keyword">using</font> XV_Videre&lt;T&gt;::params;
00023 
00024   <font class="keywordtype">bool</font>              dispInitialized;
00025   svsStereoProcess      *processObject;
00026   svsStoredImages   *file_image;
00027   Y                    disp_image;
00028 
00029   <font class="comment">// camera params</font>
00030   <font class="keywordtype">float</font> baseline, focalLength, pixelsize;
00031 
00032   <font class="comment">// dimensions of the disparity image</font>
00033 
00034   <font class="comment">// remove floor stuff</font>
00035   <font class="keywordtype">double</font> getVCoordinate(<font class="keywordtype">int</font>, <font class="keywordtype">int</font>);
00036   <font class="keywordtype">double</font> expectedFloorDisparity(CALIBRATION_PARAMS &amp;, <font class="keywordtype">double</font>);
00037 
00038  <font class="keyword">public</font>:
00039   StereoVidere(<font class="keyword">const</font> <font class="keywordtype">char</font> *dev_name = DC_DEVICE_NAME,
00040             <font class="keyword">const</font> <font class="keywordtype">char</font> *parm_string = NULL);
00041   ~StereoVidere();
00042   Y            *calc_stereo(<font class="keywordtype">void</font>);
00043   Y            *calc_display(<font class="keywordtype">void</font>);
00044   <font class="keywordtype">void</font>                  calc_warped(<font class="keywordtype">void</font>);
00045   <a class="code" href="class_XVImageScalar.html">XVImageScalar</a>&lt;u_char&gt; **get_warped()<font class="keyword"></font>{<font class="keywordflow">return</font> get_stereo();}
00046   svsSP getParams(<font class="keywordtype">void</font>)<font class="keyword"> </font>{ <font class="keywordflow">return</font> *(s_image-&gt;GetSP()); };
00047   <font class="keywordtype">void</font>         LoadImages( <a class="code" href="class_XVImageScalar.html">XVImageScalar</a>&lt;u_char&gt; &amp;im_l,
00048                               <a class="code" href="class_XVImageScalar.html">XVImageScalar</a>&lt;u_char&gt; &amp;im_r,
00049                         <a class="code" href="class_XVImageRGB.html">XVImageRGB</a>&lt;XV_RGBA32&gt; &amp;col);
00050   <a class="code" href="class_XVSize.html">XVSize</a> size(<font class="keywordtype">void</font>)<font class="keyword"> </font>{ <font class="keywordflow">return</font> XVSize(reswidth(), reslen()); };
00051   <font class="comment">// rect=false   - means rectify the images after loading them</font>
00052   <font class="comment">// rect=true    - images are already rectified</font>
00053   <font class="keywordtype">void</font>     LoadImages( <a class="code" href="class_XVImageScalar.html">XVImageScalar</a>&lt;u_char&gt; &amp;im_l,
00054                     <a class="code" href="class_XVImageScalar.html">XVImageScalar</a>&lt;u_char&gt; &amp;im_r,
00055                     <a class="code" href="class_XVImageRGB.html">XVImageRGB</a>&lt;XV_RGBA32&gt; &amp;col,<font class="keywordtype">bool</font> rect=<font class="keyword">false</font>) ;
00056 
00057   <font class="comment">// center's y-coordinate in left camera</font>
00058   <font class="keywordtype">double</font> Cy(<font class="keywordtype">void</font>)<font class="keyword"> </font>{ <font class="keywordflow">return</font> sourceObject-&gt;GetRP()-&gt;left.Cy; };
00059 
00060   <font class="comment">// calculate height/tilt of camera</font>
00061   CALIBRATION_PARAMS calibrate(Y &amp; img);
00062 
00063   <font class="comment">// given a frame, remove the floor</font>
00064   <font class="comment">// if an roi is specified, take subimage and remove floor from subimage</font>
00065   <font class="keywordtype">void</font> removeFloor(CALIBRATION_PARAMS &amp; params, Y &amp; img, <font class="keywordtype">int</font> y_offset, <font class="keywordtype">int</font> expectedError = 25);
00066 
00067   <font class="comment">// disparity image's y-offset</font>
00068   <font class="keywordtype">int</font> restop(<font class="keywordtype">void</font>)<font class="keyword">    </font>{ <font class="keywordflow">return</font> s_image-&gt;dp.dtop; };
00069   <font class="keywordtype">int</font> reswidth(<font class="keywordtype">void</font>)<font class="keyword">  </font>{ <font class="keywordflow">return</font> s_image-&gt;dp.dwidth-s_image-&gt;dp.dleft; };
00070   <font class="keywordtype">int</font> reslen(<font class="keywordtype">void</font>)<font class="keyword">    </font>{ <font class="keywordflow">return</font> s_image-&gt;dp.dheight;};
00071   <font class="keywordtype">int</font> resleft(<font class="keywordtype">void</font>)<font class="keyword">   </font>{ <font class="keywordflow">return</font> s_image-&gt;dp.dleft;};
00072 
00073   <font class="comment">//get 3D information </font>
00074   <font class="keywordtype">void</font> calcPoint3D(<font class="keywordtype">int</font> mx, <font class="keywordtype">int</font> my, <font class="keywordtype">double</font>&amp; x, <font class="keywordtype">double</font> &amp;y, <font class="keywordtype">double</font> &amp;z); 
00075 };
00076 
00077 <font class="preprocessor">#endif
</font></div></pre><hr><address><small>Generated at Fri Oct 26 00:17:16 2007 for XVision by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.0 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
