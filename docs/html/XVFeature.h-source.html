<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/home/burschka/XVision2-2.0.0/src/Tracking/XVFeature.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.0 on Fri Oct 26 00:17:16 2007 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>/home/burschka/XVision2-2.0.0/src/Tracking/XVFeature.h</h1><div class="fragment"><pre>00001 <font class="comment">// *** BEGIN_XVISION2_COPYRIGHT_NOTICE ***</font>
00002 <font class="comment">// *** END_XVISION2_COPYRIGHT_NOTICE ***</font>
00003 
00011 <font class="preprocessor">#ifndef _XVFEATURE_H_
</font>00012 <font class="preprocessor"></font><font class="preprocessor">#define _XVFEATURE_H_
</font>00013 <font class="preprocessor"></font>
00014 <font class="preprocessor">#include &lt;XVException.h&gt;</font>
00015 
<a name="l00016"></a><a class="code" href="class_XVTrackerException.html">00016</a> <font class="keyword">class </font><a class="code" href="class_XVTrackerException.html">XVTrackerException</a> : <font class="keyword">public</font> <a class="code" href="class_XVException.html">XVException</a> { <font class="keyword">public</font>:
00017   XVTrackerException() : XVException(<font class="stringliteral">"XVTracker Expection"</font>)<font class="keyword"> </font>{} 
00018   XVTrackerException( <font class="keywordtype">char</font> * err ) : XVException(err)<font class="keyword"> </font>{} };  
00019 
00020 <font class="keyword">class </font>XVTrackerOOBException : <font class="keyword">public</font> <a class="code" href="class_XVException.html">XVException</a> { <font class="keyword">public</font>:
00021   XVTrackerOOBException() : <a class="code" href="class_XVException.html">XVException</a>("Tracker Out of Bounds") {}
00022   XVTrackerOOBException( <font class="keywordtype">char</font> * err ) : <a class="code" href="class_XVException.html">XVException</a>(err) {} };
00023 
00054 <font class="keyword">template</font> &lt;<font class="keyword">class </font>ST, <font class="keyword">class </font>ER&gt;
<a name="l00055"></a><a class="code" href="class_XVStatePair.html">00055</a> <font class="keyword">class </font><a class="code" href="class_XVStatePair.html">XVStatePair</a> {
00056 
00057   <font class="keyword">typedef</font> ST STATE;
00058   <font class="keyword">typedef</font> ER ERROR;
00059 
00060  <font class="keyword">public</font>:
00061   
00062   STATE state;
00063   ERROR error;
00064 
00065   XVStatePair(STATE s, ERROR e) : state(s), error(e)<font class="keyword"> </font>{}
00066   XVStatePair(STATE s) : state(s), error(0)<font class="keyword"> </font>{}
00067   XVStatePair()<font class="keyword"> </font>{}
00068 };
00069 
00070 <font class="preprocessor">#define _XVSTATEPAIR_BIN_OP_(_OP_) \
</font>00071 <font class="preprocessor">template &lt;class ST, class ER&gt; \
</font>00072 <font class="preprocessor">XVStatePair&lt;ST, ER&gt; operator _OP_ (const XVStatePair&lt;ST, ER&gt; &amp; s1, const XVStatePair&lt;ST, ER&gt; &amp; s2){ \
</font>00073 <font class="preprocessor">  XVStatePair&lt;ST, ER&gt; newS; \
</font>00074 <font class="preprocessor">  newS.state = s1.state _OP_ s2.state; \
</font>00075 <font class="preprocessor">  newS.error = s1.error &amp;&amp; s2.error; \
</font>00076 <font class="preprocessor">  return newS; \
</font>00077 <font class="preprocessor">};
</font>00078 <font class="preprocessor"></font>
00079 _XVSTATEPAIR_BIN_OP_(+);
00080 _XVSTATEPAIR_BIN_OP_(-);
00081 
00082 <font class="preprocessor">#define _XVSTATEPAIR_COMPARE_OP_(_OP_) \
</font>00083 <font class="preprocessor">template &lt;class ST, class ER&gt; \
</font>00084 <font class="preprocessor">bool operator _OP_ (const XVStatePair&lt;ST, ER&gt; &amp; s1, const XVStatePair&lt;ST, ER&gt; &amp; s2) { \
</font>00085 <font class="preprocessor">  return s1.error _OP_ s2.error; \
</font>00086 <font class="preprocessor">};
</font>00087 <font class="preprocessor"></font>  
00088 _XVSTATEPAIR_COMPARE_OP_(&lt;);
00089 _XVSTATEPAIR_COMPARE_OP_(&gt;);
00090 _XVSTATEPAIR_COMPARE_OP_(&lt;=);
00091 _XVSTATEPAIR_COMPARE_OP_(&gt;=);
00092 _XVSTATEPAIR_COMPARE_OP_(==);
00093 
00094 <font class="preprocessor">#include &lt;XVInteractive.h&gt;</font>
00095 
00096 <font class="keyword">template</font> &lt;<font class="keyword">class </font>IMTYPE, <font class="keyword">class </font>IMTYPEINTERNAL, <font class="keyword">class </font>STATETYPE&gt;
00097 <font class="keyword">class </font>XVFeature : <font class="keyword">public</font> <a class="code" href="class_XVNode.html">XVNode</a> {
00098 
00099  <font class="keyword">protected</font>:
00100 
00101   STATETYPE prevState;
00102   STATETYPE currentState;
00103   IMTYPEINTERNAL warped;
00104 
00105   <font class="keywordtype">bool</font> warpUpdated;
00106 
00107  <font class="keyword">public</font>:
00108 
00109   <font class="keyword">typedef</font> STATETYPE STATE;
00110   <font class="keyword">typedef</font> IMTYPE IMAGE;
00111   <font class="keyword">typedef</font> IMTYPEINTERNAL IMAGE_INTERNAL;
00112 
00113   XVFeature() : warpUpdated(false) {}
00114   XVFeature(STATE init) : 
00115     currentState(init), prevState(init), warpUpdated(false) {}
00116 
00117   <font class="keyword">virtual</font> ~XVFeature()<font class="keyword"> </font>{}
00118   
00119   <font class="keyword">virtual</font> <font class="keywordtype">void</font> initState(STATE init)<font class="keyword"> </font>{ 
00120     currentState = init; prevState = currentState;
00121   }
00122 
00123   <font class="keyword">virtual</font> IMTYPEINTERNAL warp(<font class="keyword">const</font> IMTYPE &amp;) = 0;
00124 
00125   <font class="keyword">virtual</font> <font class="keyword">const</font> STATE &amp; step(<font class="keyword">const</font> IMTYPE &amp;) = 0;
00126   
00127   <font class="comment">// sets the state of this feature, then finds the next state from there</font>
00128   <font class="keyword">virtual</font> <font class="keyword">const</font> STATE &amp; step(<font class="keyword">const</font> IMTYPE &amp; im, <font class="keyword">const</font> STATE &amp; st)<font class="keyword"></font>{
00129 
00130     currentState = st;
00131     <font class="keywordflow">return</font> this-&gt;step(im);    
00132   };
00133 
00134   <font class="keyword">virtual</font> <font class="keyword">const</font> STATE &amp; getCurrentState()<font class="keyword"></font>{ <font class="keywordflow">return</font> currentState; }
00135   <font class="keyword">virtual</font> <font class="keyword">const</font> STATE &amp; getPrevState()<font class="keyword"></font>{ <font class="keywordflow">return</font> prevState; }
00136   <font class="keyword">virtual</font> STATE diffState()<font class="keyword"></font>{ <font class="keywordflow">return</font> currentState - prevState; }
00137 
00138   <font class="comment">// deprecated. for backwards compatability.  </font>
00139   <font class="keyword">virtual</font> STATE getState()<font class="keyword"> </font>{ <font class="keywordflow">return</font> currentState; }
00140   <font class="keyword">virtual</font> <font class="keywordtype">void</font> setState( <font class="keyword">const</font> STATE&amp; s)<font class="keyword"> 
</font>00141 <font class="keyword">    </font>{ prevState = currentState; currentState = s; }
00142 
00143   <font class="keyword">virtual</font> <font class="keyword">const</font> STATE &amp; interactiveInit(<a class="code" href="class_XVInteractive.html">XVInteractive</a> &amp;, <font class="keyword">const</font> IMTYPE &amp;) = 0;
00144   <font class="keyword">virtual</font> <font class="keywordtype">void</font> show(<a class="code" href="class_XVDrawable.html">XVDrawable</a> &amp;,<font class="keywordtype">float</font> scale=1.0) = 0;
00145 
00146   IMTYPEINTERNAL warpedImage()<font class="keyword"> </font>{ <font class="keywordflow">return</font> warped; }
00147 };
00148 
00149 <font class="preprocessor">#endif
</font></div></pre><hr><address><small>Generated at Fri Oct 26 00:17:16 2007 for XVision by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.0 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
