<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/home/burschka/XVision2-2.0.0/src/Images/XVImageIterator.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.0 on Fri Oct 26 00:17:16 2007 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>/home/burschka/XVision2-2.0.0/src/Images/XVImageIterator.h</h1><div class="fragment"><pre>00001 <font class="comment">// *** BEGIN_XVISION2_COPYRIGHT_NOTICE ***</font>
00002 <font class="comment">// *** END_XVISION2_COPYRIGHT_NOTICE ***</font>
00003 
00004 <font class="preprocessor">#ifndef _XVIMAGEITERATOR_H_
</font>00005 <font class="preprocessor"></font><font class="preprocessor">#define _XVIMAGEITERATOR_H_
</font>00006 <font class="preprocessor"></font>
00007 <font class="preprocessor">#include &lt;XVImageBase.h&gt;</font>
00008 <font class="preprocessor">#include &lt;XVException.h&gt;</font>
00009 
00010 <font class="keyword">class </font>XVIteratorException : <font class="keyword">public</font> <a class="code" href="class_XVException.html">XVException</a> { <font class="keyword">public</font>: XVIteratorException() : <a class="code" href="class_XVException.html">XVException</a>() {};
00011     XVIteratorException(<font class="keywordtype">char</font> * err) : <a class="code" href="class_XVException.html">XVException</a>(err) {} }; 
00012 
00034 <font class="keyword">template</font> &lt;<font class="keyword">class </font>PIXTYPE, <font class="keyword">class </font>PIXIMTYPE&gt;
<a name="l00035"></a><a class="code" href="class_XVIterator.html">00035</a> <font class="keyword">class </font><a class="code" href="class_XVIterator.html">XVIterator</a> : <font class="keyword">public</font> <a class="code" href="class_XVImageGeneric.html">XVImageGeneric</a> {
00036 
00037  <font class="keyword">protected</font>:
00038 
00039   PIXTYPE * uleftptr; 
00040   PIXTYPE * ptr;
00041   PIXTYPE * endrowptr;
00042   PIXTYPE * bottomcrnr;
00043 
00044   <font class="keywordtype">int</font> lineskip;
00045   <font class="keywordtype">int</font> rowlength;
00046 
00047   <font class="keyword">virtual</font> PIXTYPE * getDataPtr(<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXIMTYPE&gt; &amp;) = 0;
00048 
00049  <font class="keyword">protected</font>:
00050   <font class="keywordtype">void</font> init_ptrs( <font class="keyword">const</font> <a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXIMTYPE&gt; &amp; imref, 
00051             <font class="keywordtype">int</font> xsize, <font class="keywordtype">int</font> ysize, <font class="keywordtype">int</font> px = 0, <font class="keywordtype">int</font> py = 0 )<font class="keyword"> </font>{
00052     rowlength = imref.Width() + imref.Skip();
00053     uleftptr = this-&gt;getDataPtr(<font class="keyword">const_cast</font>&lt;<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXIMTYPE&gt; &amp; &gt;(imref)) + (rowlength * py) + px;
00054     ptr = uleftptr;
00055     endrowptr = ptr + xsize ;
00056     lineskip = rowlength - xsize ;
00057     bottomcrnr = uleftptr + (ysize * rowlength) - lineskip;
00058   }
00059 
00060 <font class="keyword">public</font>:
00061   
00062   <font class="keyword">inline</font> <a class="code" href="class_XVIterator.html#a4">XVIterator</a>() : uleftptr(NULL), ptr(NULL), endrowptr(NULL), bottomcrnr(NULL)<font class="keyword"> </font>{}
00063   <font class="keyword">inline</font> <a class="code" href="class_XVIterator.html#a4">XVIterator</a>(<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXIMTYPE&gt; &amp; imref) : XVImageGeneric(imref)<font class="keyword"> </font>{}
00064   <font class="keyword">inline</font> <a class="code" href="class_XVIterator.html#a4">XVIterator</a>(<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXIMTYPE&gt; &amp; imref, <font class="keywordtype">int</font> xsize, <font class="keywordtype">int</font> ysize, 
00065               <font class="keyword">const</font> <font class="keywordtype">int</font> px = 0, <font class="keyword">const</font> <font class="keywordtype">int</font> py = 0)
00066     : XVImageGeneric(<a class="code" href="class_XVSize.html#a3">XVSize</a>(xsize, ysize), XVPosition((imref.PosX() + px), (imref.PosY() + py))){}
00067 
<a name="l00073"></a><a class="code" href="class_XVIterator.html#a3">00073</a>   <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_XVIterator.html#a3">reset</a> ()<font class="keyword"> </font>{
00074     ptr = uleftptr;
00075     endrowptr = ptr + width; 
00076   }
00077  
<a name="l00082"></a><a class="code" href="class_XVIterator.html#a4">00082</a>   <font class="keyword">inline</font> <a class="code" href="class_XVIterator.html#a4">XVIterator</a>(<a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXIMTYPE&gt; &amp; iter)
00083     : <a class="code" href="class_XVImageGeneric.html">XVImageGeneric</a>(iter)  {
00084 
00085     uleftptr = iter.uleftptr;
00086     rowlength = iter.rowlength;
00087     ptr = iter.ptr;
00088     endrowptr = iter.endrowptr;
00089     bottomcrnr = iter.bottomcrnr;
00090     lineskip = iter.lineskip;
00091   }
00092   
00093   <font class="keyword">inline</font> <a class="code" href="class_XVIterator.html#a4">XVIterator</a>(<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXIMTYPE&gt; &amp; imref, <font class="keyword">const</font> <a class="code" href="class_XVImageGeneric.html">XVImageGeneric</a> &amp; xvg)
00094     : <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXIMTYPE&gt;(imref, xvg.Width(), xvg.Height(), xvg.PosX(), xvg.PosY()) {
00095     
00096     ASSERT (xvg &lt;= imref);
00097   }
00098   
<a name="l00104"></a><a class="code" href="class_XVIterator.html#a6">00104</a>   <font class="keyword">inline</font> <a class="code" href="class_XVIterator.html#a4">XVIterator</a>(<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXIMTYPE&gt; &amp; imref, <font class="keyword">const</font> <a class="code" href="class_XVSize.html">XVSize</a> &amp; xsize,
00105                 <font class="keyword">const</font> XVPosition &amp; xvp)
00106     : <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXIMTYPE&gt;(imref, xsize.Width(), xsize.Height(), xvp.PosX(), xvp.PosY()){
00107     
00108     ASSERT ((*<font class="keyword">this</font>)&lt;= imref);
00109   }
00110   
<a name="l00116"></a><a class="code" href="class_XVIterator.html#a7">00116</a>   <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_XVIterator.html#a7">currposx</a>()<font class="keyword"> </font>{
00117     ASSERT(ptr);
00118     <font class="keywordflow">return</font> (((ptr - uleftptr) % rowlength));
00119   }
00120   
<a name="l00126"></a><a class="code" href="class_XVIterator.html#a8">00126</a>   <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_XVIterator.html#a8">currposy</a>()<font class="keyword"> </font>{
00127     ASSERT(ptr);
00128     <font class="keywordflow">return</font> ((ptr - uleftptr) / rowlength);
00129   }
00130 
<a name="l00139"></a><a class="code" href="class_XVIterator.html#a9">00139</a>   <font class="keyword">inline</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXIMTYPE&gt; &amp; <a class="code" href="class_XVIterator.html#a9">operator ++ </a>()<font class="keyword"> </font>{
00140     ASSERT(ptr);
00141     <font class="keywordflow">if</font> (++ptr == endrowptr) {
00142       ptr+=lineskip, endrowptr += (rowlength);
00143     }
00144     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00145   }
00146   
00152   <font class="comment">// I disabled this function since its design is so flawed that it </font>
00153   <font class="comment">// cannot pass compiling anyway. -- Donald</font>
00154   <font class="comment">/*
</font>00155 <font class="comment">  inline XVIterator&lt;PIXTYPE, PIXIMTYPE&gt; operator ++ (int) { //postfix increment
</font>00156 <font class="comment">    ASSERT(ptr);
</font>00157 <font class="comment">    XVIterator&lt;PIXTYPE, PIXIMTYPE&gt; copthis(*this);
</font>00158 <font class="comment">    if (++ptr == endrowptr) {
</font>00159 <font class="comment">      ptr+=lineskip, endrowptr += (rowlength);
</font>00160 <font class="comment">    }
</font>00161 <font class="comment">    ASSERT(ptr &gt;= uleftptr &amp;&amp; ptr &lt;= bottomcrnr);
</font>00162 <font class="comment">    return copthis;
</font>00163 <font class="comment">  }
</font>00164 <font class="comment">  */</font> 
<a name="l00168"></a><a class="code" href="class_XVIterator.html#a10">00168</a>   <font class="keyword">inline</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXIMTYPE&gt; &amp; <a class="code" href="class_XVIterator.html#a10">operator += </a>(<font class="keyword">const</font> <font class="keywordtype">int</font> val)<font class="keyword"> </font>{
00169     ASSERT(ptr);
00170     ptr += val +  (val % width) * lineskip;
00171     ASSERT(ptr &gt;= uleftptr &amp;&amp; ptr &lt;= bottomcrnr);
00172     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00173   };
00174   
<a name="l00180"></a><a class="code" href="class_XVIterator.html#a11">00180</a>   <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_XVIterator.html#a11">operator == </a>(<a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXIMTYPE&gt; &amp; iter)<font class="keyword"> </font>{
00181     ASSERT(ptr);
00182     <font class="keywordflow">return</font> (ptr == iter.ptr);
00183   }
00184   
<a name="l00191"></a><a class="code" href="class_XVIterator.html#a12">00191</a>   <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_XVIterator.html#a12">operator &lt; </a>(<a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXIMTYPE&gt; &amp; iter)<font class="keyword"> </font>{
00192     ASSERT(ptr);
00193     ASSERT (uleftptr == iter.uleftptr);
00194     <font class="keywordflow">return</font> (ptr &lt; iter.ptr);
00195   }
00196 
<a name="l00203"></a><a class="code" href="class_XVIterator.html#a13">00203</a>   <font class="keyword">inline</font> <font class="keywordtype">bool</font> operator &gt; (<a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXIMTYPE&gt; &amp; iter)<font class="keyword"> </font>{
00204     ASSERT(ptr);
00205     ASSERT (uleftptr == iter.uleftptr);
00206     <font class="keywordflow">return</font> (ptr &gt; iter.ptr);
00207   }
00208   
<a name="l00214"></a><a class="code" href="class_XVIterator.html#a14">00214</a>   <font class="keyword">inline</font> PIXTYPE &amp; operator * ()<font class="keyword"> </font>{
00215     ASSERT(ptr);
00216     <font class="keywordflow">return</font> *ptr;
00217   }
00218 
<a name="l00223"></a><a class="code" href="class_XVIterator.html#a15">00223</a>   <font class="keyword">inline</font> PIXTYPE * <a class="code" href="class_XVIterator.html#a15">operator-&gt;</a>()<font class="keyword"> </font>{
00224     ASSERT(ptr);
00225     <font class="keywordflow">return</font> ptr;
00226   }  
00227   
<a name="l00233"></a><a class="code" href="class_XVIterator.html#a16">00233</a>   <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_XVIterator.html#a16">end</a>()<font class="keyword"> </font>{
00234     ASSERT(ptr);
00235     <font class="keywordflow">return</font> (ptr &gt;= bottomcrnr);
00236   }
00237   
<a name="l00243"></a><a class="code" href="class_XVIterator.html#a17">00243</a>   <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_XVIterator.html#a17">beginning</a>()<font class="keyword"> </font>{
00244     ASSERT(ptr);
00245     <font class="keywordflow">return</font> (ptr &lt;= uleftptr);
00246   }
00247 
<a name="l00254"></a><a class="code" href="class_XVIterator.html#a18">00254</a>   <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_XVIterator.html#a18">moveBy</a>(<font class="keywordtype">signed</font> <font class="keywordtype">int</font> diffxpos, <font class="keywordtype">signed</font> <font class="keywordtype">int</font> diffypos)<font class="keyword"> </font>{ 
00255     ASSERT(ptr);
00256     ptr += (rowlength)*diffypos + diffxpos; 
00257     endrowptr = endrowptr + (diffypos*rowlength);
00258     ASSERT(ptr &gt;= uleftptr &amp;&amp; ptr &lt;= bottomcrnr);
00259   }
00260   
00261   <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_XVIterator.html#a18">moveBy</a>(<font class="keyword">const</font> XVPosition &amp; diffPos)<font class="keyword"></font>{
00262     ASSERT(ptr);
00263     ptr += (rowlength)*diffPos.PosY() + diffPos.PosX();
00264     endrowptr = endrowptr + (diffPos.PosY()*rowlength);
00265     ASSERT(ptr &gt;= uleftptr &amp;&amp; ptr &lt;= bottomcrnr);
00266   }
00267 
<a name="l00279"></a><a class="code" href="class_XVIterator.html#a20">00279</a>   <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_XVIterator.html#a20">move</a>(<font class="keyword">const</font> XVPosition &amp; xvp)<font class="keyword"> </font>{ 
00280     ASSERT(ptr);
00281     ASSERT(this-&gt;contains(xvp));
00282     ptr = uleftptr + (xvp.PosY() * rowlength) + xvp.PosX();
00283   }
00284 
00285   <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_XVIterator.html#a20">move</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y)<font class="keyword"> </font>{ 
00286     ASSERT(ptr);
00287     ASSERT(this-&gt;contains(XVPosition(x, y)));
00288     ptr = uleftptr + (y * rowlength) + x;
00289   }
00290 };
00291 
00292 <font class="keyword">template</font> &lt;<font class="keyword">class </font>PIXTYPE&gt;
00293 <font class="keyword">class </font>XVImageIterator : <font class="keyword">virtual</font> <font class="keyword">public</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;const PIXTYPE, PIXTYPE&gt; {
00294  <font class="keyword">protected</font>:
00295   <font class="keyword">using</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;<font class="keyword">const</font> PIXTYPE, PIXTYPE&gt;::uleftptr ;
00296   <font class="keyword">using</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;<font class="keyword">const</font> PIXTYPE, PIXTYPE&gt;::ptr ;
00297   <font class="keyword">using</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;<font class="keyword">const</font> PIXTYPE, PIXTYPE&gt;::endrowptr ;
00298   <font class="keyword">using</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;<font class="keyword">const</font> PIXTYPE, PIXTYPE&gt;::bottomcrnr ;
00299   <font class="keyword">using</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;<font class="keyword">const</font> PIXTYPE, PIXTYPE&gt;::lineskip ;
00300   <font class="keyword">using</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;<font class="keyword">const</font> PIXTYPE, PIXTYPE&gt;::rowlength ;
00301 
00302  <font class="keyword">protected</font>:
00303 
00304   <font class="keyword">virtual</font> <font class="keyword">const</font> PIXTYPE * getDataPtr(<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; im)<font class="keyword"> </font>{ <font class="keywordflow">return</font> im.data(); }; 
00305 
00306  <font class="keyword">public</font>:
00307 
00308   <font class="keyword">inline</font> XVImageIterator(<font class="keyword">const</font> <a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; imref) : <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;const PIXTYPE, PIXTYPE&gt;(const_cast&lt;<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; &gt;(imref)) {
00309     uleftptr = this-&gt;getDataPtr(<font class="keyword">const_cast</font>&lt;<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; &gt;(imref));
00310     ptr = uleftptr;
00311     endrowptr = ptr + imref.Width();               
00312     lineskip = imref.Skip();
00313     rowlength = imref.Width() + lineskip;          
00314     bottomcrnr = uleftptr + (imref.Height() * rowlength) - lineskip;
00315   }
00316   
00317 
00318  <font class="keyword">public</font>:
00319   <font class="keyword">inline</font> XVImageIterator(<font class="keyword">const</font> <a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; imref, <font class="keywordtype">int</font> xsize, <font class="keywordtype">int</font> ysize, 
00320                 <font class="keyword">const</font> <font class="keywordtype">int</font> px = 0, <font class="keyword">const</font> <font class="keywordtype">int</font> py = 0)
00321     : <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;const PIXTYPE, PIXTYPE&gt;(const_cast&lt;<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; &gt;(imref), xsize, ysize, px, py) {
00322     init_ptrs( imref, xsize, ysize, px, py );
00323   }
00324 
00325   <font class="keyword">inline</font> XVImageIterator(<font class="keyword">const</font> <a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; imref, <font class="keyword">const</font> <a class="code" href="class_XVImageGeneric.html">XVImageGeneric</a> &amp; xvg) 
00326     : <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;const PIXTYPE, PIXTYPE&gt;(const_cast&lt;<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; &gt;(imref), xvg.Width(), xvg.Height(), xvg.PosX(), xvg.PosY()) {
00327     init_ptrs( imref, xvg.Width(), xvg.Height(), xvg.PosX(), xvg.PosY() ); 
00328   }
00329 
00330   <font class="keyword">inline</font> XVImageIterator(XVImageIterator&lt;PIXTYPE&gt; &amp; iter) 
00331     : <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;const PIXTYPE, PIXTYPE&gt;(iter) {}
00332 
00333   <font class="keyword">inline</font> XVImageIterator(<font class="keyword">const</font> <a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; imref, <font class="keyword">const</font> <a class="code" href="class_XVSize.html">XVSize</a> &amp; xsize, <font class="keyword">const</font> XVPosition &amp; xvp)
00334     : <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;const PIXTYPE, PIXTYPE&gt;(const_cast&lt;<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; &gt;(imref), xsize.Width(), xsize.Height(), xvp.PosX(), xvp.PosY()) {
00335     init_ptrs( imref, xsize.Width(), xsize.Height(), xvp.PosX(), xvp.PosY() );
00336   }
00337 };
00338 
00339 <font class="keyword">template</font> &lt;<font class="keyword">class </font>PIXTYPE&gt;
00340 <font class="keyword">class </font>XVImageWIterator : <font class="keyword">virtual</font> <font class="keyword">public</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXTYPE&gt; {
00341  <font class="keyword">protected</font>:
00342   <font class="keyword">using</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXTYPE&gt;::uleftptr ;
00343   <font class="keyword">using</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXTYPE&gt;::ptr ;
00344   <font class="keyword">using</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXTYPE&gt;::endrowptr ;
00345   <font class="keyword">using</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXTYPE&gt;::bottomcrnr ;
00346   <font class="keyword">using</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXTYPE&gt;::lineskip ;
00347   <font class="keyword">using</font> <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXTYPE&gt;::rowlength ;
00348 
00349  <font class="keyword">protected</font>:
00350  
00351  <font class="comment">// to save the image reference so we can unlock it later</font>
00352   <a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; img ; 
00353 
00354   <font class="keyword">virtual</font> PIXTYPE * getDataPtr(<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; im)<font class="keyword"> </font>{ <font class="keywordflow">return</font> im.lock(); }; 
00355 
00356  <font class="keyword">public</font>:
00357 
00358   <font class="keyword">inline</font> XVImageWIterator(<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; imref) : <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXTYPE&gt;(imref), img(imref) {
00359     uleftptr = this-&gt;getDataPtr(imref);
00360     ptr = uleftptr;
00361     endrowptr = ptr + imref.Width();               
00362     lineskip = imref.Skip();
00363     rowlength = imref.Width() + lineskip;          
00364     bottomcrnr = uleftptr + (imref.Height() * rowlength) - lineskip;
00365   }
00366 
00367 
00368   <font class="keyword">inline</font> XVImageWIterator(<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; imref, <font class="keywordtype">int</font> xsize, <font class="keywordtype">int</font> ysize, 
00369                 <font class="keyword">const</font> <font class="keywordtype">int</font> px = 0, <font class="keyword">const</font> <font class="keywordtype">int</font> py = 0)
00370     : <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXTYPE&gt;(imref, xsize, ysize, px, py), img(imref) {
00371     init_ptrs( imref, xsize, ysize, px, py );
00372   }
00373 
00374   <font class="keyword">inline</font> XVImageWIterator(<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; imref, <font class="keyword">const</font> <a class="code" href="class_XVImageGeneric.html">XVImageGeneric</a> &amp; xvg) 
00375     : <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE,PIXTYPE&gt;(imref, xvg.Width(), xvg.Height(), xvg.PosX(), xvg.PosY()), img(imref) {     
00376     init_ptrs( imref, xvg.Width(), xvg.Height(), xvg.PosX(), xvg.PosY() ); 
00377   }
00378 
00379   <font class="keyword">inline</font> XVImageWIterator(<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; imref, <font class="keyword">const</font> <a class="code" href="class_XVSize.html">XVSize</a> &amp; xsize, <font class="keyword">const</font> XVPosition &amp; xvp)
00380     : <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE,PIXTYPE&gt;(imref, xsize.Width(), xsize.Height(), xvp.PosX(), xvp.PosY()), img(imref) {    
00381     init_ptrs( imref, xsize.Width(), xsize.Height(), xvp.PosX(), xvp.PosY() ); 
00382   } 
00383 
00384   <font class="keyword">inline</font> XVImageWIterator(XVImageWIterator&lt;PIXTYPE&gt; &amp; iter) 
00385     : <a class="code" href="class_XVIterator.html">XVIterator</a>&lt;PIXTYPE, PIXTYPE&gt;(iter), img(iter.img) {}
00386 
00387   <font class="keyword">inline</font> <font class="keywordtype">void</font> close()<font class="keyword"></font>{ 
00388     img.unlock();
00389     uleftptr  = NULL; 
00390     ptr       = NULL;
00391     endrowptr = NULL;
00392     bottomcrnr = NULL;
00393   }
00394   ~XVImageWIterator()<font class="keyword"> </font>{ close(); }
00395 };
00396 
00397 
00398 <font class="keyword">template</font> &lt;<font class="keyword">class </font>PIXTYPE&gt;
00399 <font class="keyword">class </font>XVRowIterator : <font class="keyword">virtual</font> <font class="keyword">public</font> XVImageIterator&lt;PIXTYPE&gt; {
00400  <font class="keyword">protected</font>:
00401   <font class="keyword">using</font> XVImageIterator&lt;PIXTYPE&gt;::uleftptr ;
00402   <font class="keyword">using</font> XVImageIterator&lt;PIXTYPE&gt;::ptr ;
00403   <font class="keyword">using</font> XVImageIterator&lt;PIXTYPE&gt;::endrowptr ;
00404   <font class="keyword">using</font> XVImageIterator&lt;PIXTYPE&gt;::bottomcrnr ;
00405   <font class="keyword">using</font> XVImageIterator&lt;PIXTYPE&gt;::lineskip ;
00406   <font class="keyword">using</font> XVImageIterator&lt;PIXTYPE&gt;::rowlength ;
00407 
00408  <font class="keyword">protected</font>:
00409 
00410   <font class="keyword">const</font> PIXTYPE * beginrowptr;
00411   <font class="keywordtype">int</font> row;
00412   <font class="keywordtype">int</font> numRows;
00413 
00414  <font class="keyword">public</font>:
00415 
00416   <font class="keyword">inline</font> XVRowIterator(<font class="keyword">const</font> <a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; imref, <font class="keywordtype">int</font> r = 0) : XVImageIterator&lt;PIXTYPE&gt;(imref){
00417     
00418     ASSERT(r &lt; imref.Height());
00419     row = r;
00420     numRows = imref.Height();
00421     beginrowptr = uleftptr + (rowlength * row);
00422     endrowptr   = beginrowptr + (rowlength - lineskip);
00423     ptr = beginrowptr;    
00424   }
00425 
00426   <font class="keyword">inline</font> XVRowIterator&lt;PIXTYPE&gt; &amp; <a class="code" href="class_XVIterator.html#a9">operator ++ </a>()<font class="keyword"> </font>{
00427     ++ptr;
00428     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00429   }
00430   
00431   <font class="keyword">inline</font> XVRowIterator&lt;PIXTYPE&gt; <a class="code" href="class_XVIterator.html#a9">operator ++ </a>(<font class="keywordtype">int</font>)<font class="keyword"> </font>{
00432     XVRowIterator&lt;PIXTYPE&gt; copthis(*<font class="keyword">this</font>);
00433     ++ptr;
00434     <font class="keywordflow">return</font> copthis;
00435   }
00436   
00437   <font class="keyword">inline</font> XVRowIterator&lt;PIXTYPE&gt; &amp; <a class="code" href="class_XVIterator.html#a10">operator += </a>(<font class="keyword">const</font> <font class="keywordtype">int</font> val)<font class="keyword"> </font>{
00438     ptr += val;
00439     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00440   }
00441 
00442   <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_XVIterator.html#a16">end</a>()<font class="keyword"> </font>{
00443     <font class="keywordflow">return</font> (ptr &gt;= endrowptr);
00444   }
00445   
00446   <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_XVIterator.html#a17">beginning</a>()<font class="keyword"> </font>{
00447     <font class="keywordflow">return</font> (ptr &lt;= beginrowptr);
00448   }
00449 
00450   <font class="keyword">inline</font> XVRowIterator&lt;PIXTYPE&gt; &amp; <a class="code" href="class_XVIterator.html#a3">reset</a>()<font class="keyword"> </font>{
00451     ptr = beginrowptr;
00452     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00453   }
00454 
00455   <font class="keyword">inline</font> XVRowIterator&lt;PIXTYPE&gt; &amp; <a class="code" href="class_XVIterator.html#a3">reset</a>(<font class="keywordtype">int</font> r)<font class="keyword"></font>{
00456     <font class="comment">//    ASSERT(r &lt; numRows);</font>
00457     row = r;
00458     beginrowptr = uleftptr + (rowlength * r);
00459     endrowptr   = beginrowptr + (rowlength - lineskip);
00460     ptr = beginrowptr;
00461     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00462   }
00463 };
00464 
00465 <font class="keyword">template</font> &lt;<font class="keyword">class </font>PIXTYPE&gt;
00466 <font class="keyword">class </font>XVColIterator : <font class="keyword">virtual</font> <font class="keyword">public</font> XVImageIterator&lt;PIXTYPE&gt; {
00467  <font class="keyword">protected</font>:
00468   <font class="keyword">using</font> XVImageIterator&lt;PIXTYPE&gt;::uleftptr ;
00469   <font class="keyword">using</font> XVImageIterator&lt;PIXTYPE&gt;::ptr ;
00470   <font class="keyword">using</font> XVImageIterator&lt;PIXTYPE&gt;::endrowptr ;
00471   <font class="keyword">using</font> XVImageIterator&lt;PIXTYPE&gt;::bottomcrnr ;
00472   <font class="keyword">using</font> XVImageIterator&lt;PIXTYPE&gt;::lineskip ;
00473   <font class="keyword">using</font> XVImageIterator&lt;PIXTYPE&gt;::rowlength ;
00474 
00475  <font class="keyword">protected</font>:
00476 
00477   <font class="keyword">const</font> PIXTYPE * beginrowptr;
00478   <font class="keywordtype">int</font> column;
00479   <font class="keywordtype">int</font> numCols;
00480 
00481  <font class="keyword">public</font>:
00482 
00483   <font class="keyword">inline</font> XVColIterator(<font class="keyword">const</font> <a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; imref, <font class="keywordtype">int</font> c = 0) : XVImageIterator&lt;PIXTYPE&gt;(imref){
00484     
00485     ASSERT(c &lt; imref.Height());
00486     column = c;
00487     numCols = imref.Height();
00488     beginrowptr = uleftptr + column;
00489     endrowptr   = uleftptr + numCols*rowlength;
00490     ptr = beginrowptr;    
00491   }
00492 
00493   <font class="keyword">inline</font> XVColIterator&lt;PIXTYPE&gt; &amp; <a class="code" href="class_XVIterator.html#a9">operator ++ </a>()<font class="keyword"> </font>{
00494     ptr+=rowlength;
00495     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00496   }
00497   
00498   <font class="keyword">inline</font> XVColIterator&lt;PIXTYPE&gt; <a class="code" href="class_XVIterator.html#a9">operator ++ </a>(<font class="keywordtype">int</font>)<font class="keyword"> </font>{
00499     XVColIterator&lt;PIXTYPE&gt; copthis(*<font class="keyword">this</font>);
00500     ptr+=rowlength;
00501     <font class="keywordflow">return</font> copthis;
00502   }
00503   
00504   <font class="keyword">inline</font> XVColIterator&lt;PIXTYPE&gt; &amp; <a class="code" href="class_XVIterator.html#a10">operator += </a>(<font class="keyword">const</font> <font class="keywordtype">int</font> val)<font class="keyword"> </font>{
00505     ptr += val*rowlength;
00506     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00507   }
00508 
00509   <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_XVIterator.html#a16">end</a>()<font class="keyword"> </font>{
00510     <font class="keywordflow">return</font> (ptr &gt;= endrowptr);
00511   }
00512   
00513   <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_XVIterator.html#a17">beginning</a>()<font class="keyword"> </font>{
00514     <font class="keywordflow">return</font> (ptr &lt;= beginrowptr);
00515   }
00516 
00517   <font class="keyword">inline</font> XVColIterator&lt;PIXTYPE&gt; &amp; <a class="code" href="class_XVIterator.html#a3">reset</a>()<font class="keyword"> </font>{
00518     ptr = beginrowptr;
00519     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00520   }
00521 
00522   <font class="keyword">inline</font> XVColIterator&lt;PIXTYPE&gt; &amp; <a class="code" href="class_XVIterator.html#a3">reset</a>(<font class="keywordtype">int</font> c)<font class="keyword"></font>{
00523     <font class="comment">//    ASSERT(c &lt; numCols);</font>
00524     column = c;
00525     beginrowptr = uleftptr + column;
00526     endrowptr   = uleftptr + numCols*rowlength;
00527     ptr = beginrowptr;    
00528     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00529   }
00530 };
00531 
00532 <font class="keyword">template</font> &lt;<font class="keyword">class </font>PIXTYPE&gt;
00533 <font class="keyword">class </font>XVRowWIterator : <font class="keyword">virtual</font> <font class="keyword">public</font> XVImageWIterator&lt;PIXTYPE&gt; {
00534  <font class="keyword">protected</font>:
00535   <font class="keyword">using</font> XVImageWIterator&lt;PIXTYPE&gt;::uleftptr ;
00536   <font class="keyword">using</font> XVImageWIterator&lt;PIXTYPE&gt;::ptr ;
00537   <font class="keyword">using</font> XVImageWIterator&lt;PIXTYPE&gt;::endrowptr ;
00538   <font class="keyword">using</font> XVImageWIterator&lt;PIXTYPE&gt;::bottomcrnr ;
00539   <font class="keyword">using</font> XVImageWIterator&lt;PIXTYPE&gt;::lineskip ;
00540   <font class="keyword">using</font> XVImageWIterator&lt;PIXTYPE&gt;::rowlength ;
00541 
00542  <font class="keyword">protected</font>:
00543 
00544   PIXTYPE * beginrowptr;
00545   <font class="keywordtype">int</font> row;
00546   <font class="keywordtype">int</font> numRows;
00547 
00548  <font class="keyword">public</font>:
00549 
00550   <font class="keyword">inline</font> XVRowWIterator(<a class="code" href="class_XVImageBase.html">XVImageBase</a>&lt;PIXTYPE&gt; &amp; imref, <font class="keywordtype">int</font> r = 0) : XVImageWIterator&lt;PIXTYPE&gt;(imref){
00551     
00552     ASSERT(r &lt; imref.Height());
00553     row = r;
00554     numRows = imref.Height();
00555     beginrowptr = uleftptr + (rowlength * row);
00556     endrowptr   = beginrowptr + (rowlength - lineskip);
00557     ptr = beginrowptr;    
00558   }
00559 
00560   <font class="keyword">inline</font> XVRowWIterator&lt;PIXTYPE&gt; &amp; <a class="code" href="class_XVIterator.html#a9">operator ++ </a>()<font class="keyword"> </font>{
00561     ASSERT(ptr);
00562     ++ptr;
00563     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00564   }
00565   
00566   <font class="keyword">inline</font> XVRowWIterator&lt;PIXTYPE&gt; <a class="code" href="class_XVIterator.html#a9">operator ++ </a>(<font class="keywordtype">int</font>)<font class="keyword"> </font>{
00567     ASSERT(ptr);
00568     XVRowIterator&lt;PIXTYPE&gt; copthis(*<font class="keyword">this</font>);
00569     ++ptr;
00570     <font class="keywordflow">return</font> copthis;
00571   }
00572   
00573   <font class="keyword">inline</font> XVRowWIterator&lt;PIXTYPE&gt; &amp; <a class="code" href="class_XVIterator.html#a10">operator += </a>(<font class="keyword">const</font> <font class="keywordtype">int</font> val)<font class="keyword"> </font>{
00574     ASSERT(ptr);
00575     ptr += val;
00576     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00577   }
00578 
00579   <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_XVIterator.html#a16">end</a>()<font class="keyword"> </font>{
00580     ASSERT(ptr);
00581     <font class="keywordflow">return</font> (ptr &gt;= endrowptr);
00582   }
00583   
00584   <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_XVIterator.html#a17">beginning</a>()<font class="keyword"> </font>{
00585     ASSERT(ptr);
00586     <font class="keywordflow">return</font> (ptr &lt;= beginrowptr);
00587   }
00588 
00589   <font class="keyword">inline</font> XVRowWIterator&lt;PIXTYPE&gt; &amp; <a class="code" href="class_XVIterator.html#a3">reset</a>()<font class="keyword"> </font>{
00590     ASSERT(ptr);
00591     ptr = beginrowptr;
00592     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00593   }
00594 
00595   <font class="keyword">inline</font> XVRowWIterator&lt;PIXTYPE&gt; &amp; <a class="code" href="class_XVIterator.html#a3">reset</a>(<font class="keywordtype">int</font> r)<font class="keyword"></font>{
00596     ASSERT(ptr);
00597     ASSERT(r &lt; numRows);
00598     row = r;
00599     beginrowptr = uleftptr + (rowlength * r);
00600     endrowptr   = beginrowptr + (rowlength - lineskip);
00601     ptr = beginrowptr;
00602     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00603   }
00604 
00605   <font class="keyword">inline</font> <font class="keywordtype">int</font> currentRow()<font class="keyword"></font>{ ASSERT(ptr); <font class="keywordflow">return</font> row; }
00606   <font class="keyword">inline</font> <font class="keywordtype">int</font> index()<font class="keyword"></font>{ ASSERT(ptr); <font class="keywordflow">return</font> ptr - beginrowptr; }
00607 };
00608 
00609 <font class="preprocessor">#endif
</font></div></pre><hr><address><small>Generated at Fri Oct 26 00:17:16 2007 for XVision by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.0 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
