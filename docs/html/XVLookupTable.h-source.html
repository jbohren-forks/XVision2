<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/home/burschka/XVision2-2.0.0/src/Tools/XVLookupTable.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.0 on Fri Oct 26 00:17:16 2007 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>/home/burschka/XVision2-2.0.0/src/Tools/XVLookupTable.h</h1><div class="fragment"><pre>00001 <font class="comment">// *** BEGIN_XVISION2_COPYRIGHT_NOTICE ***</font>
00002 <font class="comment">// *** END_XVISION2_COPYRIGHT_NOTICE ***</font>
00003 
00022 <font class="preprocessor">#ifndef _XVLOOKUPTABLE_H_
</font>00023 <font class="preprocessor"></font><font class="preprocessor">#define _XVLOOKUPTABLE_H_
</font>00024 <font class="preprocessor"></font>
00025 <font class="preprocessor">#include &lt;limits.h&gt;</font>
00026 <font class="preprocessor">#include &lt;XVMacros.h&gt;</font>
00027 <font class="preprocessor">#include &lt;XVTools.h&gt;</font>
00028 <font class="preprocessor">#include &lt;XVException.h&gt;</font>
00029 
<a name="l00030"></a><a class="code" href="class_XVLookupTableException.html">00030</a> <font class="keyword">class </font><a class="code" href="class_XVLookupTableException.html">XVLookupTableException</a> : <font class="keyword">public</font> <a class="code" href="class_XVException.html">XVException</a> {
00031 
00032  <font class="keyword">public</font>: 
00033   XVLookupTableException() : XVException()<font class="keyword"> </font>{}
00034   XVLookupTableException(<font class="keywordtype">char</font> * err) : XVException(err)<font class="keyword"> </font>{}
00035 };
00036 
00037 <font class="keyword">template</font> &lt;<font class="keyword">class </font>T, <font class="keyword">class </font>Y&gt;
00038 <font class="keyword">class </font>XVLookupTable{
00039 
00040  <font class="keyword">protected</font>:
00041 
00042   <font class="comment">// holds the actual values for the table</font>
00043   Y * table;
00044 
00045  <font class="keyword">public</font>:
00046 
00047   XVLookupTable() : table(NULL) {}
00048 
00049   <font class="keyword">virtual</font> ~XVLookupTable()<font class="keyword"></font>{ <font class="keyword">delete</font> [] table; }
00050 
00055   <font class="keyword">virtual</font> Y computeValue(T) = 0;
00056   
00064   <font class="keyword">virtual</font> <font class="keywordtype">void</font> buildTable() = 0;
00065   
00071   <font class="keyword">virtual</font> Y operator [] (T) = 0;
00072 
00073   <font class="keyword">virtual</font> Y operator () (T) = 0;
00074 };
00075 
00076 <font class="comment">//  Creates a typedef'd type which is a</font>
00077 <font class="comment">//  lookup table that has the syntax:</font>
00078 <font class="comment">//  XVTable_&lt;FROM&gt;_TO_&lt;TO&gt;</font>
00079 <font class="comment">//  where &lt;FROM&gt; = the type you're coming from</font>
00080 <font class="comment">//  and   &lt;TO&gt;   = the type you're going to</font>
00081 
00082 <font class="preprocessor">#define _TYPEDEF_LOOKUP_TABLE_(_TABLE_, _FROM_TYPE_, _TO_TYPE_) \
</font>00083 <font class="preprocessor">typedef _TABLE_&lt;_FROM_TYPE_, _TO_TYPE_&gt; XVTable_ ## _FROM_TYPE_ ## _TO_ ## _TO_TYPE_; 
</font>00084 <font class="preprocessor"></font>
00098 <font class="keyword">template</font> &lt;<font class="keyword">class </font>T, <font class="keyword">class </font>Y&gt;
<a name="l00099"></a><a class="code" href="class_XVScalarTable.html">00099</a> <font class="keyword">class </font><a class="code" href="class_XVScalarTable.html">XVScalarTable</a> : <font class="keyword">public</font> XVLookupTable&lt;T, Y&gt;{
00100 <font class="keyword">protected</font>:
00101   <font class="keyword">using</font> XVLookupTable&lt;T,Y&gt;::table ;
00102   
00103 <font class="keyword">protected</font>:
00104 
00105   <font class="keyword">virtual</font> Y computeValue(T pixel) = 0;
00106 
00107 <font class="keyword">public</font>:
00108 
00109   XVScalarTable() : XVLookupTable&lt;T, Y&gt;() {}
00110 
00116   <font class="keywordtype">void</font> <a class="code" href="class_XVScalarTable.html#a1">buildTable</a>();
00117 
00118   Y operator [] (<font class="keyword">const</font> u_char pixel)<font class="keyword"></font>{ <font class="keywordflow">return</font> table[pixel]; };
00119   Y operator () (<font class="keyword">const</font> u_char  pixel)<font class="keyword"></font>{ <font class="keywordflow">return</font> table[pixel]; };
00120   Y operator [] (<font class="keyword">const</font> u_short pixel)<font class="keyword"></font>{ <font class="keywordflow">return</font> table[pixel]; };
00121   Y operator () (<font class="keyword">const</font> u_short pixel)<font class="keyword"></font>{ <font class="keywordflow">return</font> table[pixel]; };
00122   Y operator [] (<font class="keyword">const</font> <font class="keywordtype">char</font> pixel)<font class="keyword"></font>{ <font class="keywordflow">return</font> table[pixel + CHAR_MAX]; };
00123   Y operator () (<font class="keyword">const</font> <font class="keywordtype">char</font> pixel)<font class="keyword"></font>{ <font class="keywordflow">return</font> table[pixel + CHAR_MAX]; };
00124   Y operator [] (<font class="keyword">const</font> <font class="keywordtype">short</font> pixel)<font class="keyword"></font>{ <font class="keywordflow">return</font> table[pixel + SHRT_MAX]; };
00125   Y operator () (<font class="keyword">const</font> <font class="keywordtype">short</font> pixel)<font class="keyword"></font>{ <font class="keywordflow">return</font> table[pixel + SHRT_MAX]; };
00126   Y operator [] (<font class="keyword">const</font> <font class="keywordtype">int</font> pixel)<font class="keyword"></font>{ <font class="keywordflow">return</font> table[pixel + INT_MAX]; };
00127   Y operator () (<font class="keyword">const</font> <font class="keywordtype">int</font> pixel)<font class="keyword"></font>{ <font class="keywordflow">return</font> table[pixel + INT_MAX]; };
00128 };
00129 
00130 <font class="preprocessor">#include &lt;XVPixel.h&gt;</font>
00131 
00157 <font class="keyword">template</font> &lt;<font class="keyword">class </font>T, <font class="keyword">class </font>Y&gt;
<a name="l00158"></a><a class="code" href="class_XVRGBTable.html">00158</a> <font class="keyword">class </font><a class="code" href="class_XVRGBTable.html">XVRGBTable</a> : <font class="keyword">public</font> XVLookupTable&lt;T, Y&gt;{
00159 <font class="keyword">protected</font>:
00160   <font class="keyword">using</font> XVLookupTable&lt;T,Y&gt;::table ;
00161   
00162 <font class="keyword">protected</font>:
00163 
00164   <font class="keyword">virtual</font> Y computeValue(T pixel) = 0;
00165 
00166   <font class="keyword">inline</font> Y &amp; tableElement(<font class="keyword">const</font> XV_RGB15 p)<font class="keyword"> </font>{ <font class="keywordflow">return</font> table[*(u_short *)(&amp;p)]; };
00167   <font class="keyword">inline</font> Y &amp; tableElement(<font class="keyword">const</font> XV_RGB16 p)<font class="keyword"> </font>{ <font class="keywordflow">return</font> table[*(u_short *)(&amp;p)]; };
00168   <font class="keyword">inline</font> Y &amp; tableElement(<font class="keyword">const</font> XV_RGB24 p)<font class="keyword"> </font>{ 
00169     <font class="keywordflow">return</font> table[((p.r &amp; 0xf8) &lt;&lt; 8) | ((p.g &amp; 0xfc) &lt;&lt; 3) | (p.b &gt;&gt; 3)]; 
00170   };
00171   <font class="keyword">inline</font> Y &amp; tableElement(<font class="keyword">const</font> XV_RGBA32 p)<font class="keyword"> </font>{ 
00172     <font class="keywordflow">return</font> table[((p.r &amp; 0xf8) &lt;&lt; 8) | ((p.g &amp; 0xfc) &lt;&lt; 3) | (p.b &gt;&gt; 3)]; 
00173   }; 
00174 
00175 <font class="keyword">public</font>:
00176 
00177   XVRGBTable() : XVLookupTable&lt;T, Y&gt;() {}
00178 
00179   <font class="keywordtype">void</font> buildTable();
00180 
00181   <font class="keyword">inline</font> Y operator [] (<font class="keyword">const</font> XV_RGB15);
00182   <font class="keyword">inline</font> Y operator () (<font class="keyword">const</font> XV_RGB15);
00183   <font class="keyword">inline</font> Y operator [] (<font class="keyword">const</font> XV_RGB16);
00184   <font class="keyword">inline</font> Y operator () (<font class="keyword">const</font> XV_RGB16);
00185   <font class="keyword">inline</font> Y operator [] (<font class="keyword">const</font> XV_RGB24);
00186   <font class="keyword">inline</font> Y operator () (<font class="keyword">const</font> XV_RGB24);
00187   <font class="keyword">inline</font> Y operator [] (<font class="keyword">const</font> XV_RGBA32);
00188   <font class="keyword">inline</font> Y operator () (<font class="keyword">const</font> XV_RGBA32);
00189 };
00190 
00191 
00205 <font class="keyword">template</font> &lt;<font class="keyword">class </font>RGB_TYPE, <font class="keyword">class </font>TO_TYPE&gt;
<a name="l00206"></a><a class="code" href="class_XVRGBConversionTable.html">00206</a> <font class="keyword">class </font><a class="code" href="class_XVRGBConversionTable.html">XVRGBConversionTable</a> : <font class="keyword">public</font> <a class="code" href="class_XVRGBTable.html">XVRGBTable</a>&lt;RGB_TYPE, TO_TYPE&gt; {
00207 
00208  <font class="keyword">protected</font>:
00209 
00210   <font class="keyword">virtual</font> TO_TYPE computeValue(RGB_TYPE rgb)<font class="keyword"></font>{ 
00211     TO_TYPE retval; 
00212     retval &lt;&lt; rgb;
00213     <font class="keywordflow">return</font> retval;
00214   };
00215 };
00216 
00217 <font class="comment">// Adds typedefs for the tables that</font>
00218 <font class="comment">// convert from RGB to something else</font>
00219 
00220 <font class="preprocessor">#define _TYPEDEF_TABLE_RGB_TO_(_TO_TYPE_) \
</font>00221 <font class="preprocessor">_TYPEDEF_LOOKUP_TABLE_(XVRGBConversionTable, XV_RGB15, _TO_TYPE_); \
</font>00222 <font class="preprocessor">_TYPEDEF_LOOKUP_TABLE_(XVRGBConversionTable, XV_RGB16, _TO_TYPE_); \
</font>00223 <font class="preprocessor">_TYPEDEF_LOOKUP_TABLE_(XVRGBConversionTable, XV_RGB24, _TO_TYPE_); \
</font>00224 <font class="preprocessor">_TYPEDEF_LOOKUP_TABLE_(XVRGBConversionTable, XV_RGBA32, _TO_TYPE_);
</font>00225 <font class="preprocessor"></font>
00226 _TYPEDEF_TABLE_RGB_TO_(XV_YUV24);
00227 _TYPEDEF_TABLE_RGB_TO_(XV_HSV24);
00228 
00244 <font class="keyword">template</font> &lt;<font class="keyword">class </font>YUV_TYPE, <font class="keyword">class </font>TO_TYPE&gt;
<a name="l00245"></a><a class="code" href="class_XVYUVTable.html">00245</a> <font class="keyword">class </font><a class="code" href="class_XVYUVTable.html">XVYUVTable</a> : <font class="keyword">public</font> XVLookupTable&lt;YUV_TYPE, TO_TYPE&gt; {
00246 <font class="keyword">protected</font>:
00247   <font class="keyword">using</font> XVLookupTable&lt;YUV_TYPE,TO_TYPE&gt;::table ;
00248   
00249  <font class="keyword">protected</font>:
00250 
00251   <font class="keyword">virtual</font> TO_TYPE computeValue(YUV_TYPE) = 0;
00252 
00253   <font class="keyword">inline</font> TO_TYPE &amp; tableElement(<font class="keyword">const</font> XV_YUV24 p)<font class="keyword"></font>{ 
00254     <font class="keywordflow">return</font> table[((p.y &lt;&lt; 8) | (p.u &lt;&lt; 4) | p.v)];
00255   };
00256 
00257  <font class="keyword">public</font>:
00258 
00259   XVYUVTable() : XVLookupTable&lt;YUV_TYPE, TO_TYPE&gt;() {}
00260   
00261   <font class="keywordtype">void</font> buildTable();
00262 
00263   <font class="keyword">inline</font> TO_TYPE operator [] (<font class="keyword">const</font> XV_YUV24);
00264   <font class="keyword">inline</font> TO_TYPE operator () (<font class="keyword">const</font> XV_YUV24);
00265 };
00266 
00278 <font class="keyword">template</font> &lt;<font class="keyword">class </font>YUV_TYPE, <font class="keyword">class </font>TO_PIXEL_TYPE&gt;
<a name="l00279"></a><a class="code" href="class_XVYUVConversionTable.html">00279</a> <font class="keyword">class </font><a class="code" href="class_XVYUVConversionTable.html">XVYUVConversionTable</a> : <font class="keyword">public</font> <a class="code" href="class_XVYUVTable.html">XVYUVTable</a>&lt;YUV_TYPE, TO_PIXEL_TYPE&gt; {
00280 
00281  <font class="keyword">protected</font>:
00282 
00283   <font class="keyword">virtual</font> TO_PIXEL_TYPE computeValue(<font class="keyword">const</font> YUV_TYPE yuvVal)<font class="keyword"></font>{
00284     TO_PIXEL_TYPE retval;  retval &lt;&lt; yuvVal; <font class="keywordflow">return</font> retval;
00285   };
00286 };
00287 
00288 _TYPEDEF_LOOKUP_TABLE_(<a class="code" href="class_XVYUVConversionTable.html">XVYUVConversionTable</a>, XV_YUV24, XV_RGB15);
00289 _TYPEDEF_LOOKUP_TABLE_(<a class="code" href="class_XVYUVConversionTable.html">XVYUVConversionTable</a>, XV_YUV24, XV_RGB16);
00290 _TYPEDEF_LOOKUP_TABLE_(<a class="code" href="class_XVYUVConversionTable.html">XVYUVConversionTable</a>, XV_YUV24, XV_RGB24);
00291 _TYPEDEF_LOOKUP_TABLE_(<a class="code" href="class_XVYUVConversionTable.html">XVYUVConversionTable</a>, XV_YUV24, XV_RGBA32);
00292 
00304 <font class="comment">// Disabled since the code is seriously bugged and nobody seems using </font>
00305 <font class="comment">// it anyway -- Donald</font>
00306 <font class="comment">/* 
</font>00307 <font class="comment">template &lt;class RGB_TYPE&gt;
</font>00308 <font class="comment">class XVYUV422ToRGBTable : public XVLookupTable&lt;XV_YUV422, RGB_TYPE&gt; {
</font>00309 <font class="comment">
</font>00310 <font class="comment"> protected:
</font>00311 <font class="comment">
</font>00312 <font class="comment">  u_char redTable   [ 1 &lt;&lt; 16 ];
</font>00313 <font class="comment">  u_char blueTable  [ 1 &lt;&lt; 16 ];
</font>00314 <font class="comment">  u_char greenTable1[ 1 &lt;&lt; 16 ];
</font>00315 <font class="comment">  u_char greenTable2[ 1 &lt;&lt; 16 ];
</font>00316 <font class="comment">
</font>00317 <font class="comment">  virtual RGB_TYPE computeValue(const XV_YUV422);
</font>00318 <font class="comment">
</font>00319 <font class="comment"> public:
</font>00320 <font class="comment">  
</font>00321 <font class="comment">  XVYUV422ToRGBTable() : XVLookupTable&lt;XV_YUV422, RGB_TYPE&gt;() {}
</font>00322 <font class="comment">
</font>00323 <font class="comment">  void buildTable();
</font>00324 <font class="comment">
</font>00325 <font class="comment">  inline RGB_TYPE operator [] (const XV_YUV422);
</font>00326 <font class="comment">  inline RGB_TYPE operator () (const XV_YUV422);
</font>00327 <font class="comment">};  
</font>00328 <font class="comment">
</font>00329 <font class="comment">typedef XVYUV422ToRGBTable&lt;XV_RGB15 *&gt; XVTable_XV_YUV422_TO_XV_RGB15;
</font>00330 <font class="comment">typedef XVYUV422ToRGBTable&lt;XV_RGB16 *&gt; XVTable_XV_YUV422_TO_XV_RGB16;
</font>00331 <font class="comment">typedef XVYUV422ToRGBTable&lt;XV_RGB24 *&gt; XVTable_XV_YUV422_TO_XV_RGB24;
</font>00332 <font class="comment">typedef XVYUV422ToRGBTable&lt;XV_RGBA32 *&gt; XVTable_XV_YUV422_TO_XV_RGBA32;
</font>00333 <font class="comment">*/</font>
00334 <font class="preprocessor">#include &lt;XVLookupTable.icc&gt;</font>
00335 
00336 <font class="preprocessor">#endif
</font></div></pre><hr><address><small>Generated at Fri Oct 26 00:17:16 2007 for XVision by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.0 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
