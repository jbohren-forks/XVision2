<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/home/burschka/XVision2-2.0.0/src/Devices/svs22b.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.0 on Fri Oct 26 00:17:16 2007 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>/home/burschka/XVision2-2.0.0/src/Devices/svs22b.h</h1><div class="fragment"><pre>00001 <font class="comment">/*#########################################
</font>00002 <font class="comment"> * svs.h
</font>00003 <font class="comment"> *
</font>00004 <font class="comment"> * Header file for the SVM library
</font>00005 <font class="comment"> *
</font>00006 <font class="comment"> *#########################################
</font>00007 <font class="comment"> */</font>
00008 
00009 <font class="preprocessor">#ifndef _svs_h_
</font>00010 <font class="preprocessor"></font><font class="preprocessor">#define _svs_h_
</font>00011 <font class="preprocessor"></font>
00042 <font class="preprocessor">#ifdef __cplusplus
</font>00043 <font class="preprocessor"></font><font class="keyword">extern</font> <font class="stringliteral">"C"</font> {
00044 <font class="preprocessor">#endif
</font>00045 <font class="preprocessor"></font>
00046 <font class="preprocessor">#include &lt;stdio.h&gt;</font>
00047 
00048 <font class="preprocessor">#ifdef UNIX
</font>00049 <font class="preprocessor"></font><font class="preprocessor">#include &lt;sys/ipc.h&gt;</font>
00050 <font class="preprocessor">#include &lt;sys/shm.h&gt;</font>
00051 <font class="preprocessor">#include &lt;string.h&gt;</font>
00052 <font class="preprocessor">#define ALIGN8 __attribute__ ((aligned (8)))
</font>00053 <font class="preprocessor"></font><font class="preprocessor">#define ALIGN16 __attribute__ ((aligned (16)))
</font>00054 <font class="preprocessor"></font><font class="preprocessor">#define FALSE 0
</font>00055 <font class="preprocessor"></font><font class="preprocessor">#define TRUE 1
</font>00056 <font class="preprocessor"></font><font class="preprocessor">#endif
</font>00057 <font class="preprocessor"></font>
00058 <font class="preprocessor">#ifdef WIN32
</font>00059 <font class="preprocessor"></font><font class="preprocessor">#include &lt;windows.h&gt;</font>
00060 <font class="preprocessor">#define ALIGN8
</font>00061 <font class="preprocessor"></font><font class="preprocessor">#define REALLYIMPORT __declspec(dllimport)
</font>00062 <font class="preprocessor"></font><font class="preprocessor">#ifndef LIBCODE
</font>00063 <font class="preprocessor"></font><font class="preprocessor">#define IMPORT __declspec(dllimport)
</font>00064 <font class="preprocessor"></font><font class="preprocessor">#else
</font>00065 <font class="preprocessor"></font><font class="preprocessor">#define IMPORT __declspec(dllexport)
</font>00066 <font class="preprocessor"></font><font class="preprocessor">#endif
</font>00067 <font class="preprocessor"></font><font class="preprocessor">#else
</font>00068 <font class="preprocessor"></font><font class="preprocessor">#define IMPORT
</font>00069 <font class="preprocessor"></font><font class="preprocessor">#endif
</font>00070 <font class="preprocessor"></font>
00071 <font class="comment">/* This structure stores the intrinsic parameters of a camera.  The 
</font>00072 <font class="comment"> *   first half of this structure deals with parameters recovered
</font>00073 <font class="comment"> *   from camera calibration.  The second half allows for the 
</font>00074 <font class="comment"> *   parameters to be adjusted for subsampled images and subwindows.
</font>00075 <font class="comment"> *   Camera calibration should be done for the largest image size 
</font>00076 <font class="comment"> *   possible, and the image subwindow parameters used if smaller 
</font>00077 <font class="comment"> *   images are to be used.
</font>00078 <font class="comment"> */</font>
00079 <font class="keyword">typedef</font> <font class="keyword">struct </font>{
00080   <font class="comment">/* Intrinsic parameters */</font>
00081   <font class="keywordtype">int</font>       pwidth;      <font class="comment">/* [pix]    Width of frame grabber's image */</font>
00082   <font class="keywordtype">int</font>       pheight;     <font class="comment">/* [pix]    Height of frame grabber's image */</font>
00083   <font class="keywordtype">double</font>    dpx;    <font class="comment">/* [mm/pix] X dimension of pixel in frame grabber */</font>
00084   <font class="keywordtype">double</font>    dpy;    <font class="comment">/* [mm/pix] Y dimension of pixel in frame grabber */</font>
00085   <font class="keywordtype">double</font>    sx;          <font class="comment">/* []       Scale factor to compensate for any error in dpx   */</font>
00086   <font class="keywordtype">double</font>    Cx;          <font class="comment">/* [pix]    Z axis intercept of image plane */</font>
00087   <font class="keywordtype">double</font>    Cy;     <font class="comment">/* [pix]    Z axis intercept of image plane */</font>
00088   <font class="keywordtype">double</font>    f;      <font class="comment">/* [mm]     Focal length */</font>
00089   <font class="keywordtype">double</font>    kappa1;      <font class="comment">/* [1/mm^2] First coefficient of radial distortion */</font>
00090   <font class="keywordtype">double</font>    kappa2;      <font class="comment">/* [1/mm^4] Second coefficient of radial distortion */</font>
00091   <font class="keywordtype">float</font>     proj[3][4]; <font class="comment">/* projection matrix of rectified image */</font>
00092   <font class="keywordtype">float</font>     rect[3][3]; <font class="comment">/* rectification transform after correction for lens distortion */</font>
00093 } svsIP;
00094 
00095 <font class="comment">//</font>
00096 <font class="comment">// The svsSP structure stores all info about a stereo image pair and the stereo</font>
00097 <font class="comment">//   calculation.  Used as an argument to most functions.</font>
00098 <font class="comment">//</font>
00099 
00100 <font class="keyword">typedef</font> <font class="keyword">struct </font>{
00101   <font class="keywordtype">int</font> id;
00102 
00103   <font class="comment">/* Stereo algorithm parameters */</font>
00104   <font class="keywordtype">int</font> convx, convy;      <font class="comment">/* Edge convolution kernel size, pixels */</font>
00105   <font class="keywordtype">int</font> corrxsize, corrysize;   <font class="comment">/* Correlation window size, pixels */</font>
00106   <font class="keywordtype">int</font> thresh;            <font class="comment">/* Confidence threshold, 0-20 */</font>
00107   <font class="keywordtype">int</font> lr;           <font class="comment">/* Left/right check, 1=on, 0=off */</font>
00108   <font class="keywordtype">int</font> ndisp;             <font class="comment">/* Number of pixel disparities to search */</font>
00109   <font class="keywordtype">int</font> dpp;                      <font class="comment">/* Disparities per pixel */</font>
00110   <font class="keywordtype">int</font> offx, offy;        <font class="comment">/* offx is horopter displacement, offy unused */</font>
00111 
00112   <font class="comment">/* framegrabber/image parameters absolute parameters */</font>
00113   <font class="keywordtype">int</font> max_linelen;       <font class="comment">/* for NTSC fields, 640 */</font>
00114   <font class="keywordtype">int</font> max_lines;         <font class="comment">/* for NTSC fields, 240 */</font>
00115   <font class="keywordtype">int</font> max_decimation;         <font class="comment">/* 1, 2 or 4 */</font>
00116   <font class="keywordtype">int</font> max_binning;       <font class="comment">/* 1 or 2 */</font>
00117   <font class="keywordtype">double</font> gamma;               <font class="comment">/* gamma correction needed for display, 1.0 is none */</font>
00118   <font class="keywordtype">int</font> color;             <font class="comment">/* 0 for monochrome, 1 for color imager */</font>
00119 
00120   <font class="comment">/* digitization parameters */</font>
00121   <font class="keywordtype">int</font> autogain;               <font class="comment">/* 1 if currently on */</font>
00122   <font class="keywordtype">int</font> autowhite;         <font class="comment">/* 1 if currently on  */</font>
00123   <font class="keywordtype">int</font> autobrightness;         <font class="comment">// 1 if currently on </font>
00124 
00125   <font class="keywordtype">int</font> gain;              <font class="comment">/* Image gain, from 0 to 100; -1 is auto */</font>
00126   <font class="keywordtype">int</font> exposure;               <font class="comment">/* Image exposure from 0 to 100, -1 is auto */</font>
00127   <font class="keywordtype">int</font> contrast;               <font class="comment">/* Image contrast, from 0 to 100, if auto mode */</font>
00128   <font class="keywordtype">int</font> brightness;        <font class="comment">/* Image brightness, from 0 to 100, if auto mode */</font>
00129   <font class="keywordtype">int</font> saturation;        <font class="comment">/* Image color saturation, from 0 to 100 */</font>
00130   <font class="keywordtype">int</font> red;               <font class="comment">/* Image red gain, from 0 to 100, -1 is auto */</font>
00131   <font class="keywordtype">int</font> blue;              <font class="comment">/* Image blue gain, from 0 to 100, -1 is auto */</font>
00132 
00133   <font class="comment">/* Image subwindow */</font>
00134   <font class="keywordtype">int</font> ix;           <font class="comment">/* Subimage start column */</font>
00135   <font class="keywordtype">int</font> iy;           <font class="comment">/* Subimage start row */</font>
00136   <font class="keywordtype">int</font> width;             <font class="comment">/* Subimage width, in pixels */</font>
00137   <font class="keywordtype">int</font> height;            <font class="comment">/* Subimage height, in pixels */</font>
00138   <font class="keywordtype">int</font> vergence;               <font class="comment">/* Subimage vergence between images */</font>
00139   <font class="keywordtype">int</font> rectified;         <font class="comment">/* 1 if the image is rectified, else 0 */</font>
00140 
00141   <font class="comment">/* warping source subwindow parameters, only used in subwindow warping */</font>
00142   <font class="keywordtype">int</font> subwarp;           <font class="comment">/* 1 if we're warping subimage, 0 if not */</font>
00143   <font class="keywordtype">int</font> left_ix, left_iy;       <font class="comment">/* source start column and row */</font>
00144   <font class="keywordtype">int</font> left_width, left_height;     <font class="comment">/* source width and height */</font>
00145   <font class="keywordtype">int</font> right_ix, right_iy;     <font class="comment">/* source start column and row */</font>
00146   <font class="keywordtype">int</font> right_width, right_height; <font class="comment">/* source width and height */</font>
00147 
00148   <font class="comment">/* Current full-frame image size */</font>
00149   <font class="keywordtype">int</font> decimation;        <font class="comment">/* current decimation */</font>
00150   <font class="keywordtype">int</font> binning;           <font class="comment">/* current binning */</font>
00151   <font class="keywordtype">int</font> subwindow;         <font class="comment">/* 1 = subwindow capability, 0 = none */</font>
00152   <font class="comment">/* Parameters below here are important for redoing warping addresses */</font>
00153   <font class="keywordtype">int</font> linelen;           <font class="comment">/* Image line length, in pixels */</font>
00154   <font class="keywordtype">int</font> lines;                    <font class="comment">/* Number of image lines */</font>
00155 
00156   <font class="comment">/* Internal camera optical parameters */</font>
00157   <font class="keywordtype">int</font> have_rect;         <font class="comment">/* 1 if this structure has valid rectification params */</font>
00158   svsIP  left;           <font class="comment">/* Left camera parameters */</font>
00159   svsIP  right;               <font class="comment">/* Right camera parameters */</font>
00160 
00161   <font class="comment">/* Transformation between left and right cameras */</font>
00162   <font class="comment">/* Coordinate system is attached to the center of projection of the
</font>00163 <font class="comment">     left camera, with the X and Y axis aligned with the u and v axis,
</font>00164 <font class="comment">     and Z along the line of sight */</font>
00165   <font class="keywordtype">double</font> Tx;             <font class="comment">/* [mm] */</font>
00166   <font class="keywordtype">double</font> Ty;             <font class="comment">/* [mm] */</font>
00167   <font class="keywordtype">double</font> Tz;             <font class="comment">/* [mm] */</font>
00168   <font class="keywordtype">double</font> Rx;             <font class="comment">/* [rad] Yaw */</font>
00169   <font class="keywordtype">double</font> Ry;             <font class="comment">/* [rad] Pitch */</font>
00170   <font class="keywordtype">double</font> Rz;             <font class="comment">/* [rad] Roll */</font>
00171 
00172   <font class="keywordtype">unsigned</font> <font class="keywordtype">long</font> reserved;
00173 } svsSP;
00174 
00175 IMPORT <font class="keyword">extern</font> svsSP svsParams;
00176 
00177 <font class="preprocessor">#define VIDEO_ERROR_FRAME_SIZE   -6
</font>00178 <font class="preprocessor"></font><font class="preprocessor">#define VIDEO_ERROR_FRAME_SAMPLE -2
</font>00179 <font class="preprocessor"></font><font class="preprocessor">#define VIDEO_ERROR_DEC_MODE     -3
</font>00180 <font class="preprocessor"></font><font class="preprocessor">#define VIDEO_ERROR_BIN_MODE     -4
</font>00181 <font class="preprocessor"></font><font class="preprocessor">#define VIDEO_ERROR_SUBWINDOW    -5
</font>00182 <font class="preprocessor"></font>
00183 
00184 <font class="comment">//#define LINE_SIZE 160</font>
00185 <font class="comment">//#define FRAME_SIZE 120</font>
00186 
00187 <font class="comment">/*
</font>00188 <font class="comment"> * Maximum sizes for caches
</font>00189 <font class="comment"> */</font>
00190 <font class="preprocessor">#define MAXX 1280        </font><font class="comment">/* maximum number of columns in image */</font>
00191 <font class="preprocessor">#define MAXY 1032        </font><font class="comment">/* maximum number of rows in image */</font>
00192 <font class="preprocessor">#define MAXD 16               </font><font class="comment">/* stereo search range */</font>
00193 <font class="preprocessor">#define MAXDS 128        </font><font class="comment">/* abs max search range */</font>
00194 <font class="preprocessor">#define MAXW 13               </font><font class="comment">/* max window size */</font>
00195 <font class="preprocessor">#define MAXRVAL 2048          </font><font class="comment">/* maximum range value returned */</font>
00196 <font class="preprocessor">#define SUBPIXELS 16          </font><font class="comment">/* subpixel interpolation size */</font>
00197 
00198 <font class="comment">/* size of video, filter kernels */</font>
00199 IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font> svsConvX, svsConvY, svsCorrX, svsCorrY, svsNumDisp;
00200 
00201 <font class="preprocessor">#define VID_ROWS 240
</font>00202 <font class="preprocessor"></font><font class="preprocessor">#define VID_COLS 320
</font>00203 <font class="preprocessor"></font><font class="preprocessor">#define XKERNEL 9
</font>00204 <font class="preprocessor"></font><font class="preprocessor">#define YKERNEL 5
</font>00205 <font class="preprocessor"></font><font class="preprocessor">#define XCORR  11
</font>00206 <font class="preprocessor"></font><font class="preprocessor">#define YCORR  11
</font>00207 <font class="preprocessor"></font><font class="preprocessor">#define NUM_DISP 16
</font>00208 <font class="preprocessor"></font>
00209 <font class="comment">/* These macros give offsets and size of the disparity image, relative
</font>00210 <font class="comment"> *   to the left intensity image.  Takes svsSP pointer as the argument. 
</font>00211 <font class="comment"> *   Offsets are in terms of the left image.
</font>00212 <font class="comment"> */</font>
00213 <font class="preprocessor">#define ABS(x) (((x) &lt; 0) ? (-(x)) : (x))
</font>00214 <font class="preprocessor"></font><font class="preprocessor">#define RESWIDTH(p) ((p)-&gt;width - (p)-&gt;convx - (p)-&gt;corrxsize - 2*(p)-&gt;ndisp - \
</font>00215 <font class="preprocessor">                     ABS((p)-&gt;offx) + 4)
</font>00216 <font class="preprocessor"></font><font class="preprocessor">#define RESLEN(p)   ((p)-&gt;height - (p)-&gt;convy - (p)-&gt;corrysize - ABS((p)-&gt;offy) + 2)
</font>00217 <font class="preprocessor"></font><font class="preprocessor">#define RESLEFT(p)  (((p)-&gt;convx +(p)-&gt;corrxsize + (p)-&gt;ndisp + (p)-&gt;ndisp - 4) /2 \
</font>00218 <font class="preprocessor">                     + ((p)-&gt;offx &lt; 0 ? -(p)-&gt;offx : 0))
</font>00219 <font class="preprocessor"></font><font class="preprocessor">#define RESTOP(p)   (((p)-&gt;convy + (p)-&gt;corrysize - 2) / 2 + \
</font>00220 <font class="preprocessor">               ((p)-&gt;offy &lt; 0 ? -(p)-&gt;offy : 0))
</font>00221 <font class="preprocessor"></font>
00222 <font class="comment">/* These macros give offsets and size of the edge image, relative
</font>00223 <font class="comment"> *   to the left intensity image.  Takes svsSP pointer as the argument. 
</font>00224 <font class="comment"> */</font>
00225 <font class="preprocessor">#define EDGEWIDTH(p) (((p)-&gt;linelen) - (p)-&gt;convx + 1)
</font>00226 <font class="preprocessor"></font><font class="preprocessor">#define EDGELEN(p)   (((p)-&gt;height) - (p)-&gt;convy + 1)
</font>00227 <font class="preprocessor"></font><font class="preprocessor">#define EDGELEFT(p)  ((p)-&gt;convx/2)
</font>00228 <font class="preprocessor"></font><font class="preprocessor">#define EDGETOP(p)   ((p)-&gt;convy/2)
</font>00229 <font class="preprocessor"></font>
00230 <font class="comment">/* video input */</font>
00231 <font class="preprocessor">#define IN_STORAGE  4
</font>00232 <font class="preprocessor"></font><font class="preprocessor">#define IN_LIVE          5
</font>00233 <font class="preprocessor"></font>
00234 <font class="comment">/* display mode */</font>
00235 <font class="preprocessor">#define DISP_NONE   0
</font>00236 <font class="preprocessor"></font><font class="preprocessor">#define DISP_LEFT   1
</font>00237 <font class="preprocessor"></font><font class="preprocessor">#define DISP_RIGHT  2
</font>00238 <font class="preprocessor"></font><font class="preprocessor">#define DISP_BOTH   3
</font>00239 <font class="preprocessor"></font><font class="preprocessor">#define DISP_MOSAIC 4
</font>00240 <font class="preprocessor"></font><font class="preprocessor">#define DISP_HIST   5
</font>00241 <font class="preprocessor"></font><font class="preprocessor">#define DISP_IMAGE  6
</font>00242 <font class="preprocessor"></font><font class="preprocessor">#define DISP_X1     7
</font>00243 <font class="preprocessor"></font><font class="preprocessor">#define DISP_X2     8
</font>00244 <font class="preprocessor"></font>
00245 <font class="comment">/* acquisition mode */</font>
00246 <font class="preprocessor">#define AQ_SINGLE  1
</font>00247 <font class="preprocessor"></font><font class="preprocessor">#define AQ_CONTIN  2
</font>00248 <font class="preprocessor"></font><font class="preprocessor">#define AQ_FREEZE  11
</font>00249 <font class="preprocessor"></font><font class="preprocessor">#define AQ_CALIBRATE 10
</font>00250 <font class="preprocessor"></font>
00251 <font class="comment">/* GM:acquisition type */</font>
00252 <font class="preprocessor">#define AQT_SVM   3
</font>00253 <font class="preprocessor"></font><font class="preprocessor">#define AQT_BUFFER 4
</font>00254 <font class="preprocessor"></font><font class="preprocessor">#define AQT_FRAMEGRAB 5
</font>00255 <font class="preprocessor"></font><font class="preprocessor">#define AQT_NONE 6
</font>00256 <font class="preprocessor"></font>
00257 <font class="comment">/* storage modes */</font>
00258 <font class="preprocessor">#define STO_ON  1
</font>00259 <font class="preprocessor"></font><font class="preprocessor">#define STO_OFF 2
</font>00260 <font class="preprocessor"></font><font class="preprocessor">#define STO_CLEAR 3
</font>00261 <font class="preprocessor"></font>
00262 <font class="comment">/* capture formats */</font>
00263 <font class="preprocessor">#define CAP_INTERLACE   0
</font>00264 <font class="preprocessor"></font><font class="preprocessor">#define CAP_RGCOMPONENT 1
</font>00265 <font class="preprocessor"></font><font class="preprocessor">#define CAP_DUAL        2
</font>00266 <font class="preprocessor"></font><font class="preprocessor">#define CAP_TRIPLE      3
</font>00267 <font class="preprocessor"></font><font class="preprocessor">#define CAP_CHANNELS    4
</font>00268 <font class="preprocessor"></font>
00269 <font class="preprocessor">#define BI_YVU9  0x39555659        // YVU9, planar
</font>00270 <font class="preprocessor"></font><font class="preprocessor">#define BI_YV12  0x32315659        // YVU12 (4:1:1), planar
</font>00271 <font class="preprocessor"></font><font class="preprocessor">#define BI_I420  0x30323449        // YUV12 (4:2:0), planar 
</font>00272 <font class="preprocessor"></font><font class="preprocessor">#define BI_I422  0x32323449        // YUV12 (4:1:1), planar
</font>00273 <font class="preprocessor"></font><font class="preprocessor">#define BI_MRG2  0x3247524d        // YUV16 (4:2:2) ??
</font>00274 <font class="preprocessor"></font>
00275 <font class="comment">/*
</font>00276 <font class="comment"> * SVS video capture main functions
</font>00277 <font class="comment"> */</font>
00278 
00279 IMPORT <font class="keyword">extern</font> <font class="keywordtype">char</font> *svsVideoIdent;  <font class="comment">// identifier string for this capture interface</font>
00280 
00281 IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font> svsDevice1; <font class="comment">// first video capture device</font>
00282 IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font> svsDevice2; <font class="comment">// second video capture device</font>
00283 IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font> svsDeviceName; <font class="comment">// name for the default device</font>
00284 
00285 IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font> svsDevice1;  <font class="comment">/* first video capture device */</font>
00286 IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font> svsDevice2;  <font class="comment">/* second video capture device */</font>
00287 IMPORT <font class="keyword">extern</font> <font class="keywordtype">char</font> *svsDevName;  <font class="comment">/* name of first device */</font>
00288 IMPORT <font class="keyword">extern</font> <font class="keywordtype">char</font> *svsDevName2; <font class="comment">/* name of second device */</font>
00289 IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font>  svsIsPXC_PC104; <font class="comment">/* set to 1 for PXC PC104+ board under LINUX */</font>
00290 
00291 IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font> svsMeteorMotion; <font class="comment">/* set if capturing motion images */</font>
00292 IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font> svsDualCaptureFormat; <font class="comment">/* set if line interlace stereo */</font>
00293 IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font> svsSwapInterlace; <font class="comment">/* 1 to swap L/R interlaced images */</font>
00294 IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font> svsVideoFormat;  <font class="comment">/* fourcc code for video stream type */</font>
00295 IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font> svsVideoBPP;     <font class="comment">/* number of bits per pixel, only for RGB */</font>
00296 <font class="comment">/* opens capture for business: */</font>
00297 IMPORT <font class="keywordtype">int</font>  svsVideoOpen(svsSP *sp);<font class="comment">/* returns -1 if error, 0 if ok */</font>
00298 IMPORT <font class="keywordtype">void</font> svsVideoClose(<font class="keywordtype">void</font>); <font class="comment">/* closes capture */</font>
00299 <font class="comment">/* waits for next continuous image from meteors: */</font>
00300 IMPORT <font class="keywordtype">int</font>  svsVideoWaitImage(<font class="keywordtype">int</font> ms); 
00301 IMPORT <font class="keywordtype">int</font>  svsVideoCheckImage(<font class="keywordtype">void</font>); <font class="comment">/* Returns 1 if an image is ready */</font>
00302 IMPORT <font class="keywordtype">void</font> svsVideoGetImage(<font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> **buf, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> **buf2, 
00303                     <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> **color);
00304 IMPORT <font class="keywordtype">void</font> svsVideoGetRectImage(<font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> **left, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> **right, 
00305                      <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> **color, svsSP *sp);
00306 IMPORT <font class="keywordtype">int</font>  svsVideoCheckParameters(svsSP *sp);   <font class="comment">/* returns -1 on error, 0 if ok */</font>
00307 IMPORT <font class="keywordtype">int</font>  svsVideoStartContinuous(svsSP *sp);   <font class="comment">/* ditto */</font>
00308 IMPORT <font class="keywordtype">void</font> svsVideoHaltContinuous(<font class="keywordtype">void</font>);
00309 IMPORT <font class="keywordtype">int</font>  svsVideoGrabSingle(svsSP *sp, <font class="keywordtype">int</font> ms); <font class="comment">/* returns -1 on error, 0 if ok ??? */</font>
00310 
00311 <font class="comment">// Calls to set parameters while streaming video</font>
00312 IMPORT <font class="keywordtype">int</font> svsVideoSetDigParams(svsSP *sp);<font class="comment">/* -1  on error, 0 if ok */</font>
00313 IMPORT <font class="keywordtype">int</font> svsVideoSetOffsets(svsSP *sp); <font class="comment">/* ditto */</font>
00314 
00315 <font class="comment">// Imager name (not implemented on analog stereo heads)</font>
00316 IMPORT <font class="keywordtype">int</font> svsVideoGetName(<font class="keywordtype">char</font> *name);
00317 IMPORT <font class="keywordtype">int</font> svsVideoSetName(<font class="keywordtype">char</font> *name);
00318 
00319 <font class="comment">// Debugging callbacks</font>
00320 IMPORT <font class="keyword">extern</font> void (*capDebug)(<font class="keywordtype">char</font> *str);
00321 IMPORT <font class="keyword">extern</font> void (*svsDebug)(<font class="keywordtype">char</font> *str);
00322 IMPORT <font class="keywordtype">void</font> svsDebugMessage(<font class="keywordtype">char</font> *str, ...);
00323 
00324 
00325 <font class="comment">/* 
</font>00326 <font class="comment"> * Sometimes we need to say which image we want
</font>00327 <font class="comment"> */</font>
00328 
00329 <font class="preprocessor">#define svsLEFT  1
</font>00330 <font class="preprocessor"></font><font class="preprocessor">#define svsRIGHT 2
</font>00331 <font class="preprocessor"></font><font class="preprocessor">#define svsBOTH  3
</font>00332 <font class="preprocessor"></font><font class="preprocessor">#define svsLEFTCOLOR 100
</font>00333 <font class="preprocessor"></font><font class="preprocessor">#define svsLEFTBAYER 102
</font>00334 <font class="preprocessor"></font><font class="preprocessor">#define svsRIGHTBAYER 103
</font>00335 <font class="preprocessor"></font>
00336 <font class="comment">// added for CAP_TRIPLE</font>
00337 <font class="comment">//</font>
00338 <font class="preprocessor">#define svsLEFT1  4
</font>00339 <font class="preprocessor"></font><font class="preprocessor">#define svsLEFT2  5
</font>00340 <font class="preprocessor"></font><font class="preprocessor">#define svsLEFT3  6
</font>00341 <font class="preprocessor"></font><font class="preprocessor">#define svsRIGHT1 7
</font>00342 <font class="preprocessor"></font><font class="preprocessor">#define svsRIGHT2 8
</font>00343 <font class="preprocessor"></font><font class="preprocessor">#define svsRIGHT3 9
</font>00344 <font class="preprocessor"></font>
00345 <font class="comment">/*
</font>00346 <font class="comment"> * display output
</font>00347 <font class="comment"> */</font>
00348 <font class="preprocessor">#define svsNONE       0
</font>00349 <font class="preprocessor"></font><font class="preprocessor">#define svsSTEREO     1
</font>00350 <font class="preprocessor"></font><font class="preprocessor">#define svsDISPARITY  1
</font>00351 <font class="preprocessor"></font><font class="preprocessor">#define svsCONFIDENCE 2
</font>00352 <font class="preprocessor"></font><font class="preprocessor">#define svsEDGES      3
</font>00353 <font class="preprocessor"></font><font class="preprocessor">#define svsMOTION     4
</font>00354 <font class="preprocessor"></font><font class="preprocessor">#define svsCOLOR      5
</font>00355 <font class="preprocessor"></font><font class="preprocessor">#define svsRGB24      5
</font>00356 <font class="preprocessor"></font><font class="preprocessor">#define svsMONOCHROME 6
</font>00357 <font class="preprocessor"></font>
00358 <font class="comment">/*
</font>00359 <font class="comment"> * Calculations
</font>00360 <font class="comment"> */</font>
00361 
00362 <font class="comment">/* MMX definition */</font>
00363 <font class="preprocessor">#ifdef IMPORT_HASMMX
</font>00364 <font class="preprocessor"></font>REALLYIMPORT
00365 <font class="preprocessor">#else
</font>00366 <font class="preprocessor"></font>IMPORT 
00367 <font class="preprocessor">#endif
</font>00368 <font class="preprocessor"></font><font class="keyword">extern</font> <font class="keywordtype">int</font> svsHasMMX;    <font class="comment">/* 1 for MMX, 0 for none, -1 for not checked. 
</font>00369 <font class="comment">                       Can be set or read */</font>
00370 IMPORT <font class="keywordtype">int</font> svsCheckMMX(<font class="keywordtype">void</font>); <font class="comment">/* Checks for MMX and sets svsHasMMX */</font>
00371 
00372 <font class="comment">/* 
</font>00373 <font class="comment"> * Puts stereo results in dest, using il and ir images.
</font>00374 <font class="comment"> * Uses stereo params structure; if null, defaults to svsParams.
</font>00375 <font class="comment"> */</font>
00376 IMPORT <font class="keywordtype">void</font> svsWarpImage(<font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *dest, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *src, <font class="keywordtype">int</font> which, svsSP *sp);
00377 IMPORT <font class="keywordtype">void</font> svsWarpImageBayer(<font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *dest, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *dest2, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *src, 
00378                      <font class="keywordtype">int</font> which, svsSP *sp);
00379 IMPORT <font class="keywordtype">void</font> svsWarpImageMono (<font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *dest, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *src, 
00380                      <font class="keywordtype">int</font> which, svsSP *sp);
00381 IMPORT <font class="keywordtype">void</font> svsCalcStereo(<font class="keywordtype">short</font> *dest, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *il, 
00382                  <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *ir, svsSP *sp);
00383 IMPORT <font class="keywordtype">void</font> svsCalcEdges(<font class="keywordtype">signed</font> <font class="keywordtype">char</font> *ld, <font class="keywordtype">signed</font> <font class="keywordtype">char</font> *rd, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *il, 
00384                 <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *ir, svsSP *sp);
00385 IMPORT <font class="keywordtype">void</font> svsCalcConfidence(<font class="keywordtype">char</font> *dest, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *il, svsSP *sp);
00386 IMPORT <font class="keywordtype">void</font> svsCalcMotion(<font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *dest, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *il, 
00387                  <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *ir, <font class="keywordtype">int</font> xs, <font class="keywordtype">int</font> ys, svsSP *sp);
00388 
00389 
00390 <font class="comment">// 3D reconstruction functions</font>
00391 <font class="comment">//</font>
00392 IMPORT <font class="keywordtype">void</font>     svsReconstruct3D (<font class="keywordtype">float</font> *X, <font class="keywordtype">float</font> *Y, <font class="keywordtype">float</font> *Z, <font class="keywordtype">float</font> x, <font class="keywordtype">float</font> y, <font class="keywordtype">float</font> disp, svsSP *sp);
00393 IMPORT <font class="keywordtype">void</font> svsReconstruct3DFast (<font class="keywordtype">float</font> *X, <font class="keywordtype">float</font> *Y, <font class="keywordtype">float</font> *Z, <font class="keywordtype">float</font> x, <font class="keywordtype">float</font> y, <font class="keywordtype">float</font> disp, svsSP *sp);
00394 
00395 <font class="preprocessor">#define LRVAL     0xfffe </font><font class="comment">/* failed LR check */</font>
00396 <font class="preprocessor">#define THRESHVAL 0xffff </font><font class="comment">/* failed texture threshold */</font>
00397 
00398 <font class="comment">/*
</font>00399 <font class="comment"> * Display functions
</font>00400 <font class="comment"> */</font>
00401 
00402 IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font> svsStereoOffsetX, svsStereoOffsetY; <font class="comment">/* right image offsets */</font>
00403 IMPORT <font class="keyword">extern</font> <font class="keywordtype">float</font> svsRangeImageValue(<font class="keywordtype">short</font> *im, svsSP *sp);
00404 IMPORT <font class="keyword">extern</font> <font class="keywordtype">void</font> svsSleep(<font class="keywordtype">int</font> ms); <font class="comment">/* wait this long in milliseconds */</font>
00405 IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font> svsSharedMemory; <font class="comment">/* if we can use shared memory, really only Unix */</font>
00406 
00407 <font class="preprocessor">#ifdef UNIX
</font>00408 <font class="preprocessor"></font><font class="preprocessor">#endif
</font>00409 <font class="preprocessor"></font>
00410 <font class="preprocessor">#ifdef WIN32
</font>00411 <font class="preprocessor"></font>IMPORT <font class="keyword">extern</font> HWND svsMainWin;          <font class="comment">/* main window handle */</font>
00412 <font class="preprocessor">#endif
</font>00413 <font class="preprocessor"></font>
00414 <font class="comment">/*
</font>00415 <font class="comment"> * image file I/O
</font>00416 <font class="comment"> */</font>
00417 
00418 <font class="preprocessor">#define HEADER_STRING "srisunim"
</font>00419 <font class="preprocessor"></font>
00420 <font class="preprocessor">#define HEADER_TYPE 0
</font>00421 <font class="preprocessor"></font><font class="preprocessor">#define DATA_INT 0
</font>00422 <font class="preprocessor"></font><font class="preprocessor">#define DATA_FLOAT 1
</font>00423 <font class="preprocessor"></font><font class="preprocessor">#define HEADER_SIZE 256
</font>00424 <font class="preprocessor"></font>
00425 <font class="comment">/* whole structure should take 256 bytes */</font>
00426 <font class="keyword">struct  </font>srisunim_header
00427 { 
00428     <font class="keywordtype">char</font> srisunim[8];
00429     <font class="keywordtype">char</font> header_type;
00430     <font class="keywordtype">char</font> data_type;
00431     <font class="keywordtype">char</font> bits_per_pixel;
00432     <font class="keywordtype">char</font> n_dimensions;
00433     <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> x_dimension_h;
00434     <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> x_dimension_l;
00435     <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> y_dimension_h;
00436     <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> y_dimension_l;
00437     <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> z_dimension_h;
00438     <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> z_dimension_l;
00439     <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> n_images;   <font class="comment">/* number of images */</font>
00440     <font class="keywordtype">char</font> padding[237];
00441   };
00442     
00443 <font class="comment">/* Reads an .ssi file and put contents into buffer.  Creates
</font>00444 <font class="comment">   buffer if null. */</font>
00445 IMPORT <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *svsReadFile(<font class="keywordtype">char</font> *name, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *buffer, 
00446                   <font class="keywordtype">int</font> *height, <font class="keywordtype">int</font> *width, <font class="keywordtype">int</font> *num);
00447 IMPORT <font class="keywordtype">int</font> svsWriteImage(<font class="keywordtype">char</font> *name, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *buf, <font class="keywordtype">int</font> width, 
00448                 <font class="keywordtype">int</font> height, <font class="keywordtype">char</font> *type, <font class="keywordtype">int</font> numframes);
00449 IMPORT <font class="keywordtype">int</font> svsReadFileSizeBMP(<font class="keywordtype">char</font> *name, <font class="keywordtype">int</font> *width, <font class="keywordtype">int</font> *height);
00450 IMPORT <font class="keywordtype">int</font> svsReadFileBMP(<font class="keywordtype">char</font> *name, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *buffer, 
00451                   <font class="keywordtype">int</font> *width, <font class="keywordtype">int</font> *height, <font class="keywordtype">int</font> interlace);
00452 IMPORT <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *svsReadFile2BMP(<font class="keywordtype">char</font> *name, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *buffer, 
00453                   <font class="keywordtype">int</font> *width, <font class="keywordtype">int</font> *height);
00454 IMPORT <font class="keywordtype">int</font> svsWriteImageBMP(<font class="keywordtype">char</font> *name, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *im, <font class="keywordtype">int</font> width, <font class="keywordtype">int</font> height, 
00455                     <font class="keywordtype">int</font> isDisparity);
00456 IMPORT <font class="keywordtype">int</font> svsWriteImageColorBMP(<font class="keywordtype">char</font> *name, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *im, <font class="keywordtype">int</font> width, <font class="keywordtype">int</font> height, 
00457                      <font class="keywordtype">int</font> isDisparity);
00458 IMPORT <font class="keywordtype">int</font>
00459 svsWrite3DArray(<font class="keywordtype">char</font> *fname, <font class="keywordtype">float</font> *X, <font class="keywordtype">float</font> *Y, <font class="keywordtype">float</font> *Z, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *image, 
00460           <font class="keywordtype">short</font> *disp, <font class="keywordtype">int</font> type, svsSP *sp);
00461 IMPORT <font class="keywordtype">int</font>
00462 svsWrite3DCloud(<font class="keywordtype">char</font> *fname, <font class="keywordtype">float</font> *X, <font class="keywordtype">float</font> *Y, <font class="keywordtype">float</font> *Z, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *image, 
00463           <font class="keywordtype">short</font> *disp, <font class="keywordtype">int</font> type, svsSP *sp, <font class="keywordtype">int</font> nump);
00464 IMPORT <font class="keywordtype">int</font> svsWriteDisparity(<font class="keywordtype">char</font> *fname, <font class="keywordtype">short</font> *disp, svsSP *sp);
00465 
00466 
00467 IMPORT <font class="keyword">extern</font> <font class="keywordtype">char</font> *svsError;
00468 IMPORT <font class="keywordtype">int</font> svsWriteParamFile(<font class="keywordtype">char</font> *fname, svsSP *sp);  <font class="comment">/* writes out stereo setting */</font>
00469 IMPORT <font class="keywordtype">int</font> svsWriteRectFile(<font class="keywordtype">char</font> *fname, svsSP *sp);   <font class="comment">/* writes out stereo rectification */</font>
00470 IMPORT <font class="keywordtype">int</font> svsReadParamFile(<font class="keywordtype">char</font> *fname, svsSP *sp);   <font class="comment">/* reads in stereo setting */</font>
00471 
00472 
00473 
00474 <font class="comment">/* version of the software */</font>
00475 <font class="preprocessor">#define engine_version 22
</font>00476 <font class="preprocessor"></font>IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font> svsEngineVersion;
00477 
00478 IMPORT <font class="keyword">extern</font> <font class="keywordtype">int</font> svsPreFilterTime, svsPostFilterTime, svsCorrTime, svsMaxTime;
00479 
00480 <font class="comment">//</font>
00481 <font class="comment">// new FLTK-based drawing fns</font>
00482 <font class="comment">//</font>
00483 
00484 IMPORT <font class="keywordtype">void</font> svsDrawImage(<font class="keywordtype">void</font> *w, <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *im, svsSP *p, <font class="keywordtype">int</font> type);
00485 IMPORT <font class="keywordtype">void</font> *svsGetWindow(<font class="keywordtype">int</font> w, <font class="keywordtype">int</font> h);
00486 IMPORT <font class="keywordtype">int</font>  fltk_check(<font class="keywordtype">void</font>); <font class="comment">/* process fltk events */</font>
00487 
00488 <font class="preprocessor">#ifdef __cplusplus
</font>00489 <font class="preprocessor"></font>}
00490 <font class="preprocessor">#endif
</font>00491 <font class="preprocessor"></font>
00492 <font class="preprocessor">#endif    </font><font class="comment">/* ifdef _svs_h_ */</font>
</div></pre><hr><address><small>Generated at Fri Oct 26 00:17:16 2007 for XVision by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.0 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
